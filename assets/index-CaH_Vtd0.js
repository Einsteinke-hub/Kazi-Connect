var Qn=s=>{throw TypeError(s)};var Pr=(s,e,t)=>e.has(s)||Qn("Cannot "+t);var y=(s,e,t)=>(Pr(s,e,"read from private field"),t?t.call(s):e.get(s)),O=(s,e,t)=>e.has(s)?Qn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),k=(s,e,t,r)=>(Pr(s,e,"write to private field"),r?r.call(s,t):e.set(s,t),t),U=(s,e,t)=>(Pr(s,e,"access private method"),t);var Qs=(s,e,t,r)=>({set _(n){k(s,e,n,t)},get _(){return y(s,e,r)}});import{j as a,V as na,R as ia,A as aa,C as oa,T as la,D as ca,P as Zo,a as da,b as el,S as tl,_ as N,t as sl,c as br,d as ua,I as rl,e as ha,f as fa,g as nl,h as ma,i as il,L as pa,k as ga,l as al,m as ol,n as ya,o as ll,p as cl,q as va,r as dl,s as ba,u as wa,v as xa,w as _a,x as ul}from"./ui-uKThiyXJ.js";import{a as hl,r as v,o as j,v as fl,R as ml,g as ja}from"./vendor-mcFVZpHQ.js";import{t as pl,c as gl,a as wr}from"./utils-B2rm_Apj.js";import{o as Sa,s as kt,e as yl}from"./forms-Dujilogc.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var ka,Yn=hl;ka=Yn.createRoot,Yn.hydrateRoot;const vl=1,bl=1e6;let Rr=0;function wl(){return Rr=(Rr+1)%Number.MAX_SAFE_INTEGER,Rr.toString()}const Ar=new Map,Xn=s=>{if(Ar.has(s))return;const e=setTimeout(()=>{Ar.delete(s),Es({type:"REMOVE_TOAST",toastId:s})},bl);Ar.set(s,e)},xl=(s,e)=>{switch(e.type){case"ADD_TOAST":return{...s,toasts:[e.toast,...s.toasts].slice(0,vl)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?Xn(t):s.toasts.forEach(r=>{Xn(r.id)}),{...s,toasts:s.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(t=>t.id!==e.toastId)}}},lr=[];let cr={toasts:[]};function Es(s){cr=xl(cr,s),lr.forEach(e=>{e(cr)})}function _l({...s}){const e=wl(),t=n=>Es({type:"UPDATE_TOAST",toast:{...n,id:e}}),r=()=>Es({type:"DISMISS_TOAST",toastId:e});return Es({type:"ADD_TOAST",toast:{...s,id:e,open:!0,onOpenChange:n=>{n||r()}}}),{id:e,dismiss:r,update:t}}function gt(){const[s,e]=v.useState(cr);return v.useEffect(()=>(lr.push(e),()=>{const t=lr.indexOf(e);t>-1&&lr.splice(t,1)}),[s]),{...s,toast:_l,dismiss:t=>Es({type:"DISMISS_TOAST",toastId:t})}}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ea=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sl={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=v.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:n="",children:i,iconNode:o,...l},c)=>v.createElement("svg",{ref:c,...Sl,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:Ea("lucide",n),...l},[...o.map(([d,u])=>v.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=(s,e)=>{const t=v.forwardRef(({className:r,...n},i)=>v.createElement(kl,{ref:i,iconNode:e,className:Ea(`lucide-${jl(s)}`,r),...n}));return t.displayName=`${s}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=K("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=K("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=K("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=K("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=K("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=K("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=K("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=K("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=K("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=K("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=K("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=K("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=K("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=K("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=K("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=K("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=K("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=K("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=K("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=K("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=K("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=K("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=K("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=K("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=K("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=K("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=K("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=K("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=K("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=K("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=K("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function q(...s){return pl(gl(s))}const Kl=Zo,Aa=v.forwardRef(({className:s,...e},t)=>a.jsx(na,{ref:t,className:q("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...e}));Aa.displayName=na.displayName;const zl=wr("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ia=v.forwardRef(({className:s,variant:e,...t},r)=>a.jsx(ia,{ref:r,className:q(zl({variant:e}),s),...t}));Ia.displayName=ia.displayName;const Vl=v.forwardRef(({className:s,...e},t)=>a.jsx(aa,{ref:t,className:q("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",s),...e}));Vl.displayName=aa.displayName;const $a=v.forwardRef(({className:s,...e},t)=>a.jsx(oa,{ref:t,className:q("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...e,children:a.jsx(Ra,{className:"h-4 w-4"})}));$a.displayName=oa.displayName;const La=v.forwardRef(({className:s,...e},t)=>a.jsx(la,{ref:t,className:q("text-sm font-semibold",s),...e}));La.displayName=la.displayName;const Ua=v.forwardRef(({className:s,...e},t)=>a.jsx(ca,{ref:t,className:q("text-sm opacity-90",s),...e}));Ua.displayName=ca.displayName;function Wl(){const{toasts:s}=gt();return a.jsxs(Kl,{children:[s.map(function({id:e,title:t,description:r,action:n,...i}){return a.jsxs(Ia,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[t&&a.jsx(La,{children:t}),r&&a.jsx(Ua,{children:r})]}),n,a.jsx($a,{})]},e)}),a.jsx(Aa,{})]})}var ti=["light","dark"],Hl="(prefers-color-scheme: dark)",Jl=v.createContext(void 0),Gl={setTheme:s=>{},themes:[]},Ql=()=>{var s;return(s=v.useContext(Jl))!=null?s:Gl};v.memo(({forcedTheme:s,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:n,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let d=i==="system",u=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,f=n?ti.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",g=(b,m=!1,p=!0)=>{let x=o?o[b]:b,_=m?b+"|| ''":`'${x}'`,w="";return n&&p&&!m&&ti.includes(b)&&(w+=`d.style.colorScheme = '${b}';`),t==="class"?m||x?w+=`c.add(${_})`:w+="null":x&&(w+=`d[s](n,${_})`),w},h=s?`!function(){${u}${g(s)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${d})){var t='${Hl}',m=window.matchMedia(t);if(m.media!==t||m.matches){${g("dark")}}else{${g("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${g(o?"x[e]":"e",!0)}}${d?"":"else{"+g(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${g(o?"x[e]":"e",!0)}}else{${g(i,!1,!1)};}${f}}catch(t){}}();`;return v.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:h}})});var Yl=s=>{switch(s){case"success":return ec;case"info":return sc;case"warning":return tc;case"error":return rc;default:return null}},Xl=Array(12).fill(0),Zl=({visible:s,className:e})=>j.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":s},j.createElement("div",{className:"sonner-spinner"},Xl.map((t,r)=>j.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),ec=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),tc=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),sc=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),rc=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},j.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),nc=j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},j.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),j.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),ic=()=>{let[s,e]=j.useState(document.hidden);return j.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),s},Vr=1,ac=class{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{let e=this.subscribers.indexOf(s);this.subscribers.splice(e,1)}),this.publish=s=>{this.subscribers.forEach(e=>e(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var e;let{message:t,...r}=s,n=typeof(s==null?void 0:s.id)=="number"||((e=s.id)==null?void 0:e.length)>0?s.id:Vr++,i=this.toasts.find(l=>l.id===n),o=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),i?this.toasts=this.toasts.map(l=>l.id===n?(this.publish({...l,...s,id:n,title:t}),{...l,...s,id:n,dismissible:o,title:t}):l):this.addToast({title:t,...r,dismissible:o,id:n}),n},this.dismiss=s=>(this.dismissedToasts.add(s),s||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:s,dismiss:!0})),s),this.message=(s,e)=>this.create({...e,message:s}),this.error=(s,e)=>this.create({...e,message:s,type:"error"}),this.success=(s,e)=>this.create({...e,type:"success",message:s}),this.info=(s,e)=>this.create({...e,type:"info",message:s}),this.warning=(s,e)=>this.create({...e,type:"warning",message:s}),this.loading=(s,e)=>this.create({...e,type:"loading",message:s}),this.promise=(s,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:s,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=s instanceof Promise?s:s(),n=t!==void 0,i,o=r.then(async c=>{if(i=["resolve",c],j.isValidElement(c))n=!1,this.create({id:t,type:"default",message:c});else if(lc(c)&&!c.ok){n=!1;let d=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:t,type:"error",message:d,description:u})}else if(e.success!==void 0){n=!1;let d=typeof e.success=="function"?await e.success(c):e.success,u=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"success",message:d,description:u})}}).catch(async c=>{if(i=["reject",c],e.error!==void 0){n=!1;let d=typeof e.error=="function"?await e.error(c):e.error,u=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"error",message:d,description:u})}}).finally(()=>{var c;n&&(this.dismiss(t),t=void 0),(c=e.finally)==null||c.call(e)}),l=()=>new Promise((c,d)=>o.then(()=>i[0]==="reject"?d(i[1]):c(i[1])).catch(d));return typeof t!="string"&&typeof t!="number"?{unwrap:l}:Object.assign(t,{unwrap:l})},this.custom=(s,e)=>{let t=(e==null?void 0:e.id)||Vr++;return this.create({jsx:s(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ye=new ac,oc=(s,e)=>{let t=(e==null?void 0:e.id)||Vr++;return ye.addToast({title:s,...e,id:t}),t},lc=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",cc=oc,dc=()=>ye.toasts,uc=()=>ye.getActiveToasts();Object.assign(cc,{success:ye.success,info:ye.info,warning:ye.warning,error:ye.error,custom:ye.custom,message:ye.message,promise:ye.promise,dismiss:ye.dismiss,loading:ye.loading},{getHistory:dc,getToasts:uc});function hc(s,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=s:r.appendChild(document.createTextNode(s))}hc(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ys(s){return s.label!==void 0}var fc=3,mc="32px",pc="16px",si=4e3,gc=356,yc=14,vc=20,bc=200;function De(...s){return s.filter(Boolean).join(" ")}function wc(s){let[e,t]=s.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}var xc=s=>{var e,t,r,n,i,o,l,c,d,u,f;let{invert:g,toast:h,unstyled:b,interacting:m,setHeights:p,visibleToasts:x,heights:_,index:w,toasts:S,expanded:T,removeToast:E,defaultRichColors:$,closeButton:L,style:I,cancelButtonStyle:J,actionButtonStyle:ce,className:se="",descriptionClassName:Ie="",duration:zt,position:Ws,gap:bt,loadingIcon:He,expandByDefault:Hs,classNames:F,icons:we,closeButtonAriaLabel:kr="Close toast",pauseWhenPageIsHidden:H}=s,[Q,X]=j.useState(null),[pe,Vt]=j.useState(null),[ee,Er]=j.useState(!1),[xs,Js]=j.useState(!1),[_s,Nr]=j.useState(!1),[qn,Bo]=j.useState(!1),[Mo,Kn]=j.useState(!1),[qo,Cr]=j.useState(0),[Ko,zn]=j.useState(0),js=j.useRef(h.duration||zt||si),Vn=j.useRef(null),wt=j.useRef(null),zo=w===0,Vo=w+1<=x,Oe=h.type,Wt=h.dismissible!==!1,Wo=h.className||"",Ho=h.descriptionClassName||"",Gs=j.useMemo(()=>_.findIndex(R=>R.toastId===h.id)||0,[_,h.id]),Jo=j.useMemo(()=>{var R;return(R=h.closeButton)!=null?R:L},[h.closeButton,L]),Wn=j.useMemo(()=>h.duration||zt||si,[h.duration,zt]),Tr=j.useRef(0),Ht=j.useRef(0),Hn=j.useRef(0),Jt=j.useRef(null),[Go,Qo]=Ws.split("-"),Jn=j.useMemo(()=>_.reduce((R,V,Y)=>Y>=Gs?R:R+V.height,0),[_,Gs]),Gn=ic(),Yo=h.invert||g,Or=Oe==="loading";Ht.current=j.useMemo(()=>Gs*bt+Jn,[Gs,Jn]),j.useEffect(()=>{js.current=Wn},[Wn]),j.useEffect(()=>{Er(!0)},[]),j.useEffect(()=>{let R=wt.current;if(R){let V=R.getBoundingClientRect().height;return zn(V),p(Y=>[{toastId:h.id,height:V,position:h.position},...Y]),()=>p(Y=>Y.filter($e=>$e.toastId!==h.id))}},[p,h.id]),j.useLayoutEffect(()=>{if(!ee)return;let R=wt.current,V=R.style.height;R.style.height="auto";let Y=R.getBoundingClientRect().height;R.style.height=V,zn(Y),p($e=>$e.find(Le=>Le.toastId===h.id)?$e.map(Le=>Le.toastId===h.id?{...Le,height:Y}:Le):[{toastId:h.id,height:Y,position:h.position},...$e])},[ee,h.title,h.description,p,h.id]);let Ye=j.useCallback(()=>{Js(!0),Cr(Ht.current),p(R=>R.filter(V=>V.toastId!==h.id)),setTimeout(()=>{E(h)},bc)},[h,E,p,Ht]);j.useEffect(()=>{if(h.promise&&Oe==="loading"||h.duration===1/0||h.type==="loading")return;let R;return T||m||H&&Gn?(()=>{if(Hn.current<Tr.current){let V=new Date().getTime()-Tr.current;js.current=js.current-V}Hn.current=new Date().getTime()})():js.current!==1/0&&(Tr.current=new Date().getTime(),R=setTimeout(()=>{var V;(V=h.onAutoClose)==null||V.call(h,h),Ye()},js.current)),()=>clearTimeout(R)},[T,m,h,Oe,H,Gn,Ye]),j.useEffect(()=>{h.delete&&Ye()},[Ye,h.delete]);function Xo(){var R,V,Y;return we!=null&&we.loading?j.createElement("div",{className:De(F==null?void 0:F.loader,(R=h==null?void 0:h.classNames)==null?void 0:R.loader,"sonner-loader"),"data-visible":Oe==="loading"},we.loading):He?j.createElement("div",{className:De(F==null?void 0:F.loader,(V=h==null?void 0:h.classNames)==null?void 0:V.loader,"sonner-loader"),"data-visible":Oe==="loading"},He):j.createElement(Zl,{className:De(F==null?void 0:F.loader,(Y=h==null?void 0:h.classNames)==null?void 0:Y.loader),visible:Oe==="loading"})}return j.createElement("li",{tabIndex:0,ref:wt,className:De(se,Wo,F==null?void 0:F.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[Oe],(t=h==null?void 0:h.classNames)==null?void 0:t[Oe]),"data-sonner-toast":"","data-rich-colors":(r=h.richColors)!=null?r:$,"data-styled":!(h.jsx||h.unstyled||b),"data-mounted":ee,"data-promise":!!h.promise,"data-swiped":Mo,"data-removed":xs,"data-visible":Vo,"data-y-position":Go,"data-x-position":Qo,"data-index":w,"data-front":zo,"data-swiping":_s,"data-dismissible":Wt,"data-type":Oe,"data-invert":Yo,"data-swipe-out":qn,"data-swipe-direction":pe,"data-expanded":!!(T||Hs&&ee),style:{"--index":w,"--toasts-before":w,"--z-index":S.length-w,"--offset":`${xs?qo:Ht.current}px`,"--initial-height":Hs?"auto":`${Ko}px`,...I,...h.style},onDragEnd:()=>{Nr(!1),X(null),Jt.current=null},onPointerDown:R=>{Or||!Wt||(Vn.current=new Date,Cr(Ht.current),R.target.setPointerCapture(R.pointerId),R.target.tagName!=="BUTTON"&&(Nr(!0),Jt.current={x:R.clientX,y:R.clientY}))},onPointerUp:()=>{var R,V,Y,$e;if(qn||!Wt)return;Jt.current=null;let Le=Number(((R=wt.current)==null?void 0:R.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Xe=Number(((V=wt.current)==null?void 0:V.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),xt=new Date().getTime()-((Y=Vn.current)==null?void 0:Y.getTime()),Ue=Q==="x"?Le:Xe,Ze=Math.abs(Ue)/xt;if(Math.abs(Ue)>=vc||Ze>.11){Cr(Ht.current),($e=h.onDismiss)==null||$e.call(h,h),Vt(Q==="x"?Le>0?"right":"left":Xe>0?"down":"up"),Ye(),Bo(!0),Kn(!1);return}Nr(!1),X(null)},onPointerMove:R=>{var V,Y,$e,Le;if(!Jt.current||!Wt||((V=window.getSelection())==null?void 0:V.toString().length)>0)return;let Xe=R.clientY-Jt.current.y,xt=R.clientX-Jt.current.x,Ue=(Y=s.swipeDirections)!=null?Y:wc(Ws);!Q&&(Math.abs(xt)>1||Math.abs(Xe)>1)&&X(Math.abs(xt)>Math.abs(Xe)?"x":"y");let Ze={x:0,y:0};Q==="y"?(Ue.includes("top")||Ue.includes("bottom"))&&(Ue.includes("top")&&Xe<0||Ue.includes("bottom")&&Xe>0)&&(Ze.y=Xe):Q==="x"&&(Ue.includes("left")||Ue.includes("right"))&&(Ue.includes("left")&&xt<0||Ue.includes("right")&&xt>0)&&(Ze.x=xt),(Math.abs(Ze.x)>0||Math.abs(Ze.y)>0)&&Kn(!0),($e=wt.current)==null||$e.style.setProperty("--swipe-amount-x",`${Ze.x}px`),(Le=wt.current)==null||Le.style.setProperty("--swipe-amount-y",`${Ze.y}px`)}},Jo&&!h.jsx?j.createElement("button",{"aria-label":kr,"data-disabled":Or,"data-close-button":!0,onClick:Or||!Wt?()=>{}:()=>{var R;Ye(),(R=h.onDismiss)==null||R.call(h,h)},className:De(F==null?void 0:F.closeButton,(n=h==null?void 0:h.classNames)==null?void 0:n.closeButton)},(i=we==null?void 0:we.close)!=null?i:nc):null,h.jsx||v.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:j.createElement(j.Fragment,null,Oe||h.icon||h.promise?j.createElement("div",{"data-icon":"",className:De(F==null?void 0:F.icon,(o=h==null?void 0:h.classNames)==null?void 0:o.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Xo():null,h.type!=="loading"?h.icon||(we==null?void 0:we[Oe])||Yl(Oe):null):null,j.createElement("div",{"data-content":"",className:De(F==null?void 0:F.content,(l=h==null?void 0:h.classNames)==null?void 0:l.content)},j.createElement("div",{"data-title":"",className:De(F==null?void 0:F.title,(c=h==null?void 0:h.classNames)==null?void 0:c.title)},typeof h.title=="function"?h.title():h.title),h.description?j.createElement("div",{"data-description":"",className:De(Ie,Ho,F==null?void 0:F.description,(d=h==null?void 0:h.classNames)==null?void 0:d.description)},typeof h.description=="function"?h.description():h.description):null),v.isValidElement(h.cancel)?h.cancel:h.cancel&&Ys(h.cancel)?j.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||J,onClick:R=>{var V,Y;Ys(h.cancel)&&Wt&&((Y=(V=h.cancel).onClick)==null||Y.call(V,R),Ye())},className:De(F==null?void 0:F.cancelButton,(u=h==null?void 0:h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,v.isValidElement(h.action)?h.action:h.action&&Ys(h.action)?j.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||ce,onClick:R=>{var V,Y;Ys(h.action)&&((Y=(V=h.action).onClick)==null||Y.call(V,R),!R.defaultPrevented&&Ye())},className:De(F==null?void 0:F.actionButton,(f=h==null?void 0:h.classNames)==null?void 0:f.actionButton)},h.action.label):null))};function ri(){if(typeof window>"u"||typeof document>"u")return"ltr";let s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function _c(s,e){let t={};return[s,e].forEach((r,n)=>{let i=n===1,o=i?"--mobile-offset":"--offset",l=i?pc:mc;function c(d){["top","right","bottom","left"].forEach(u=>{t[`${o}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?t[`${o}-${d}`]=l:t[`${o}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):c(l)}),t}var jc=v.forwardRef(function(s,e){let{invert:t,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:d,theme:u="light",richColors:f,duration:g,style:h,visibleToasts:b=fc,toastOptions:m,dir:p=ri(),gap:x=yc,loadingIcon:_,icons:w,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:T}=s,[E,$]=j.useState([]),L=j.useMemo(()=>Array.from(new Set([r].concat(E.filter(H=>H.position).map(H=>H.position)))),[E,r]),[I,J]=j.useState([]),[ce,se]=j.useState(!1),[Ie,zt]=j.useState(!1),[Ws,bt]=j.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),He=j.useRef(null),Hs=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=j.useRef(null),we=j.useRef(!1),kr=j.useCallback(H=>{$(Q=>{var X;return(X=Q.find(pe=>pe.id===H.id))!=null&&X.delete||ye.dismiss(H.id),Q.filter(({id:pe})=>pe!==H.id)})},[]);return j.useEffect(()=>ye.subscribe(H=>{if(H.dismiss){$(Q=>Q.map(X=>X.id===H.id?{...X,delete:!0}:X));return}setTimeout(()=>{fl.flushSync(()=>{$(Q=>{let X=Q.findIndex(pe=>pe.id===H.id);return X!==-1?[...Q.slice(0,X),{...Q[X],...H},...Q.slice(X+1)]:[H,...Q]})})})}),[]),j.useEffect(()=>{if(u!=="system"){bt(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?bt("dark"):bt("light")),typeof window>"u")return;let H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:Q})=>{bt(Q?"dark":"light")})}catch{H.addListener(({matches:X})=>{try{bt(X?"dark":"light")}catch(pe){console.error(pe)}})}},[u]),j.useEffect(()=>{E.length<=1&&se(!1)},[E]),j.useEffect(()=>{let H=Q=>{var X,pe;n.every(Vt=>Q[Vt]||Q.code===Vt)&&(se(!0),(X=He.current)==null||X.focus()),Q.code==="Escape"&&(document.activeElement===He.current||(pe=He.current)!=null&&pe.contains(document.activeElement))&&se(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[n]),j.useEffect(()=>{if(He.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,we.current=!1)}},[He.current]),j.createElement("section",{ref:e,"aria-label":`${S} ${Hs}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},L.map((H,Q)=>{var X;let[pe,Vt]=H.split("-");return E.length?j.createElement("ol",{key:H,dir:p==="auto"?ri():p,tabIndex:-1,ref:He,className:l,"data-sonner-toaster":!0,"data-theme":Ws,"data-y-position":pe,"data-lifted":ce&&E.length>1&&!i,"data-x-position":Vt,style:{"--front-toast-height":`${((X=I[0])==null?void 0:X.height)||0}px`,"--width":`${gc}px`,"--gap":`${x}px`,...h,..._c(c,d)},onBlur:ee=>{we.current&&!ee.currentTarget.contains(ee.relatedTarget)&&(we.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||we.current||(we.current=!0,F.current=ee.relatedTarget)},onMouseEnter:()=>se(!0),onMouseMove:()=>se(!0),onMouseLeave:()=>{Ie||se(!1)},onDragEnd:()=>se(!1),onPointerDown:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||zt(!0)},onPointerUp:()=>zt(!1)},E.filter(ee=>!ee.position&&Q===0||ee.position===H).map((ee,Er)=>{var xs,Js;return j.createElement(xc,{key:ee.id,icons:w,index:Er,toast:ee,defaultRichColors:f,duration:(xs=m==null?void 0:m.duration)!=null?xs:g,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:t,visibleToasts:b,closeButton:(Js=m==null?void 0:m.closeButton)!=null?Js:o,interacting:Ie,position:H,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:kr,toasts:E.filter(_s=>_s.position==ee.position),heights:I.filter(_s=>_s.position==ee.position),setHeights:J,expandByDefault:i,gap:x,loadingIcon:_,expanded:ce,pauseWhenPageIsHidden:T,swipeDirections:s.swipeDirections})})):null}))});const Sc=({...s})=>{const{theme:e="system"}=Ql();return a.jsx(jc,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})},kc=el,Ec=v.forwardRef(({className:s,sideOffset:e=4,...t},r)=>a.jsx(da,{ref:r,sideOffset:e,className:q("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));Ec.displayName=da.displayName;var Ks=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ft=typeof window>"u"||"Deno"in globalThis;function ve(){}function Nc(s,e){return typeof s=="function"?s(e):s}function Wr(s){return typeof s=="number"&&s>=0&&s!==1/0}function Da(s,e){return Math.max(s+(e||0)-Date.now(),0)}function mt(s,e){return typeof s=="function"?s(e):s}function Re(s,e){return typeof s=="function"?s(e):s}function ni(s,e){const{type:t="all",exact:r,fetchStatus:n,predicate:i,queryKey:o,stale:l}=s;if(o){if(r){if(e.queryHash!==En(o,e.options))return!1}else if(!As(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||n&&n!==e.state.fetchStatus||i&&!i(e))}function ii(s,e){const{exact:t,status:r,predicate:n,mutationKey:i}=s;if(i){if(!e.options.mutationKey)return!1;if(t){if(Rs(e.options.mutationKey)!==Rs(i))return!1}else if(!As(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||n&&!n(e))}function En(s,e){return((e==null?void 0:e.queryKeyHashFn)||Rs)(s)}function Rs(s){return JSON.stringify(s,(e,t)=>Jr(t)?Object.keys(t).sort().reduce((r,n)=>(r[n]=t[n],r),{}):t)}function As(s,e){return s===e?!0:typeof s!=typeof e?!1:s&&e&&typeof s=="object"&&typeof e=="object"?Object.keys(e).every(t=>As(s[t],e[t])):!1}function Fa(s,e){if(s===e)return s;const t=ai(s)&&ai(e);if(t||Jr(s)&&Jr(e)){const r=t?s:Object.keys(s),n=r.length,i=t?e:Object.keys(e),o=i.length,l=t?[]:{},c=new Set(r);let d=0;for(let u=0;u<o;u++){const f=t?u:i[u];(!t&&c.has(f)||t)&&s[f]===void 0&&e[f]===void 0?(l[f]=void 0,d++):(l[f]=Fa(s[f],e[f]),l[f]===s[f]&&s[f]!==void 0&&d++)}return n===o&&d===n?s:l}return e}function Hr(s,e){if(!e||Object.keys(s).length!==Object.keys(e).length)return!1;for(const t in s)if(s[t]!==e[t])return!1;return!0}function ai(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function Jr(s){if(!oi(s))return!1;const e=s.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!oi(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function oi(s){return Object.prototype.toString.call(s)==="[object Object]"}function Cc(s){return new Promise(e=>{setTimeout(e,s)})}function Gr(s,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(s,e):t.structuralSharing!==!1?Fa(s,e):e}function Tc(s,e,t=0){const r=[...s,e];return t&&r.length>t?r.slice(1):r}function Oc(s,e,t=0){const r=[e,...s];return t&&r.length>t?r.slice(0,-1):r}var Nn=Symbol();function Ba(s,e){return!s.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!s.queryFn||s.queryFn===Nn?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}function Pc(s,e){return typeof s=="function"?s(...e):!!s}var Tt,nt,rs,Gi,Rc=(Gi=class extends Ks{constructor(){super();O(this,Tt);O(this,nt);O(this,rs);k(this,rs,e=>{if(!Ft&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){y(this,nt)||this.setEventListener(y(this,rs))}onUnsubscribe(){var e;this.hasListeners()||((e=y(this,nt))==null||e.call(this),k(this,nt,void 0))}setEventListener(e){var t;k(this,rs,e),(t=y(this,nt))==null||t.call(this),k(this,nt,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){y(this,Tt)!==e&&(k(this,Tt,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof y(this,Tt)=="boolean"?y(this,Tt):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Tt=new WeakMap,nt=new WeakMap,rs=new WeakMap,Gi),Cn=new Rc,ns,it,is,Qi,Ac=(Qi=class extends Ks{constructor(){super();O(this,ns,!0);O(this,it);O(this,is);k(this,is,e=>{if(!Ft&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){y(this,it)||this.setEventListener(y(this,is))}onUnsubscribe(){var e;this.hasListeners()||((e=y(this,it))==null||e.call(this),k(this,it,void 0))}setEventListener(e){var t;k(this,is,e),(t=y(this,it))==null||t.call(this),k(this,it,e(this.setOnline.bind(this)))}setOnline(e){y(this,ns)!==e&&(k(this,ns,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return y(this,ns)}},ns=new WeakMap,it=new WeakMap,is=new WeakMap,Qi),hr=new Ac;function Qr(){let s,e;const t=new Promise((n,i)=>{s=n,e=i});t.status="pending",t.catch(()=>{});function r(n){Object.assign(t,n),delete t.resolve,delete t.reject}return t.resolve=n=>{r({status:"fulfilled",value:n}),s(n)},t.reject=n=>{r({status:"rejected",reason:n}),e(n)},t}function Ic(s){return Math.min(1e3*2**s,3e4)}function Ma(s){return(s??"online")==="online"?hr.isOnline():!0}var qa=class extends Error{constructor(s){super("CancelledError"),this.revert=s==null?void 0:s.revert,this.silent=s==null?void 0:s.silent}};function Ir(s){return s instanceof qa}function Ka(s){let e=!1,t=0,r=!1,n;const i=Qr(),o=m=>{var p;r||(g(new qa(m)),(p=s.abort)==null||p.call(s))},l=()=>{e=!0},c=()=>{e=!1},d=()=>Cn.isFocused()&&(s.networkMode==="always"||hr.isOnline())&&s.canRun(),u=()=>Ma(s.networkMode)&&s.canRun(),f=m=>{var p;r||(r=!0,(p=s.onSuccess)==null||p.call(s,m),n==null||n(),i.resolve(m))},g=m=>{var p;r||(r=!0,(p=s.onError)==null||p.call(s,m),n==null||n(),i.reject(m))},h=()=>new Promise(m=>{var p;n=x=>{(r||d())&&m(x)},(p=s.onPause)==null||p.call(s)}).then(()=>{var m;n=void 0,r||(m=s.onContinue)==null||m.call(s)}),b=()=>{if(r)return;let m;const p=t===0?s.initialPromise:void 0;try{m=p??s.fn()}catch(x){m=Promise.reject(x)}Promise.resolve(m).then(f).catch(x=>{var E;if(r)return;const _=s.retry??(Ft?0:3),w=s.retryDelay??Ic,S=typeof w=="function"?w(t,x):w,T=_===!0||typeof _=="number"&&t<_||typeof _=="function"&&_(t,x);if(e||!T){g(x);return}t++,(E=s.onFail)==null||E.call(s,t,x),Cc(S).then(()=>d()?void 0:h()).then(()=>{e?g(x):b()})})};return{promise:i,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?b():h().then(b),i)}}var $c=s=>setTimeout(s,0);function Lc(){let s=[],e=0,t=l=>{l()},r=l=>{l()},n=$c;const i=l=>{e?s.push(l):n(()=>{t(l)})},o=()=>{const l=s;s=[],l.length&&n(()=>{r(()=>{l.forEach(c=>{t(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{t=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{n=l}}}var oe=Lc(),Ot,Yi,za=(Yi=class{constructor(){O(this,Ot)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Wr(this.gcTime)&&k(this,Ot,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(Ft?1/0:5*60*1e3))}clearGcTimeout(){y(this,Ot)&&(clearTimeout(y(this,Ot)),k(this,Ot,void 0))}},Ot=new WeakMap,Yi),as,Pt,Pe,Rt,de,Fs,At,Me,Je,Xi,Uc=(Xi=class extends za{constructor(e){super();O(this,Me);O(this,as);O(this,Pt);O(this,Pe);O(this,Rt);O(this,de);O(this,Fs);O(this,At);k(this,At,!1),k(this,Fs,e.defaultOptions),this.setOptions(e.options),this.observers=[],k(this,Rt,e.client),k(this,Pe,y(this,Rt).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,k(this,as,Dc(this.options)),this.state=e.state??y(this,as),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=y(this,de))==null?void 0:e.promise}setOptions(e){this.options={...y(this,Fs),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&y(this,Pe).remove(this)}setData(e,t){const r=Gr(this.state.data,e,this.options);return U(this,Me,Je).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){U(this,Me,Je).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,n;const t=(r=y(this,de))==null?void 0:r.promise;return(n=y(this,de))==null||n.cancel(e),t?t.then(ve).catch(ve):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(y(this,as))}isActive(){return this.observers.some(e=>Re(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Nn||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>mt(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Da(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=y(this,de))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=y(this,de))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),y(this,Pe).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(y(this,de)&&(y(this,At)?y(this,de).cancel({revert:!0}):y(this,de).cancelRetry()),this.scheduleGc()),y(this,Pe).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||U(this,Me,Je).call(this,{type:"invalidate"})}fetch(e,t){var d,u,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(y(this,de))return y(this,de).continueRetry(),y(this,de).promise}if(e&&this.setOptions(e),!this.options.queryFn){const g=this.observers.find(h=>h.options.queryFn);g&&this.setOptions(g.options)}const r=new AbortController,n=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(k(this,At,!0),r.signal)})},i=()=>{const g=Ba(this.options,t),b=(()=>{const m={client:y(this,Rt),queryKey:this.queryKey,meta:this.meta};return n(m),m})();return k(this,At,!1),this.options.persister?this.options.persister(g,b,this):g(b)},l=(()=>{const g={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:y(this,Rt),state:this.state,fetchFn:i};return n(g),g})();(d=this.options.behavior)==null||d.onFetch(l,this),k(this,Pt,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&U(this,Me,Je).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=g=>{var h,b,m,p;Ir(g)&&g.silent||U(this,Me,Je).call(this,{type:"error",error:g}),Ir(g)||((b=(h=y(this,Pe).config).onError)==null||b.call(h,g,this),(p=(m=y(this,Pe).config).onSettled)==null||p.call(m,this.state.data,g,this)),this.scheduleGc()};return k(this,de,Ka({initialPromise:t==null?void 0:t.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:g=>{var h,b,m,p;if(g===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch(x){c(x);return}(b=(h=y(this,Pe).config).onSuccess)==null||b.call(h,g,this),(p=(m=y(this,Pe).config).onSettled)==null||p.call(m,g,this.state.error,this),this.scheduleGc()},onError:c,onFail:(g,h)=>{U(this,Me,Je).call(this,{type:"failed",failureCount:g,error:h})},onPause:()=>{U(this,Me,Je).call(this,{type:"pause"})},onContinue:()=>{U(this,Me,Je).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),y(this,de).start()}},as=new WeakMap,Pt=new WeakMap,Pe=new WeakMap,Rt=new WeakMap,de=new WeakMap,Fs=new WeakMap,At=new WeakMap,Me=new WeakSet,Je=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Va(r.data,this.options),fetchMeta:e.meta??null};case"success":return k(this,Pt,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return Ir(n)&&n.revert&&y(this,Pt)?{...y(this,Pt),fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),oe.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),y(this,Pe).notify({query:this,type:"updated",action:e})})},Xi);function Va(s,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ma(e.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function Dc(s){const e=typeof s.initialData=="function"?s.initialData():s.initialData,t=e!==void 0,r=t?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var ze,Zi,Fc=(Zi=class extends Ks{constructor(e={}){super();O(this,ze);this.config=e,k(this,ze,new Map)}build(e,t,r){const n=t.queryKey,i=t.queryHash??En(n,t);let o=this.get(i);return o||(o=new Uc({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(o)),o}add(e){y(this,ze).has(e.queryHash)||(y(this,ze).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=y(this,ze).get(e.queryHash);t&&(e.destroy(),t===e&&y(this,ze).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){oe.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return y(this,ze).get(e)}getAll(){return[...y(this,ze).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>ni(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>ni(e,r)):t}notify(e){oe.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){oe.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){oe.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ze=new WeakMap,Zi),Ve,he,It,We,tt,ea,Bc=(ea=class extends za{constructor(e){super();O(this,We);O(this,Ve);O(this,he);O(this,It);this.mutationId=e.mutationId,k(this,he,e.mutationCache),k(this,Ve,[]),this.state=e.state||Mc(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){y(this,Ve).includes(e)||(y(this,Ve).push(e),this.clearGcTimeout(),y(this,he).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){k(this,Ve,y(this,Ve).filter(t=>t!==e)),this.scheduleGc(),y(this,he).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){y(this,Ve).length||(this.state.status==="pending"?this.scheduleGc():y(this,he).remove(this))}continue(){var e;return((e=y(this,It))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,l,c,d,u,f,g,h,b,m,p,x,_,w,S,T,E,$,L;const t=()=>{U(this,We,tt).call(this,{type:"continue"})};k(this,It,Ka({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(I,J)=>{U(this,We,tt).call(this,{type:"failed",failureCount:I,error:J})},onPause:()=>{U(this,We,tt).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>y(this,he).canRun(this)}));const r=this.state.status==="pending",n=!y(this,It).canStart();try{if(r)t();else{U(this,We,tt).call(this,{type:"pending",variables:e,isPaused:n}),await((o=(i=y(this,he).config).onMutate)==null?void 0:o.call(i,e,this));const J=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e));J!==this.state.context&&U(this,We,tt).call(this,{type:"pending",context:J,variables:e,isPaused:n})}const I=await y(this,It).start();return await((u=(d=y(this,he).config).onSuccess)==null?void 0:u.call(d,I,e,this.state.context,this)),await((g=(f=this.options).onSuccess)==null?void 0:g.call(f,I,e,this.state.context)),await((b=(h=y(this,he).config).onSettled)==null?void 0:b.call(h,I,null,this.state.variables,this.state.context,this)),await((p=(m=this.options).onSettled)==null?void 0:p.call(m,I,null,e,this.state.context)),U(this,We,tt).call(this,{type:"success",data:I}),I}catch(I){try{throw await((_=(x=y(this,he).config).onError)==null?void 0:_.call(x,I,e,this.state.context,this)),await((S=(w=this.options).onError)==null?void 0:S.call(w,I,e,this.state.context)),await((E=(T=y(this,he).config).onSettled)==null?void 0:E.call(T,void 0,I,this.state.variables,this.state.context,this)),await((L=($=this.options).onSettled)==null?void 0:L.call($,void 0,I,e,this.state.context)),I}finally{U(this,We,tt).call(this,{type:"error",error:I})}}finally{y(this,he).runNext(this)}}},Ve=new WeakMap,he=new WeakMap,It=new WeakMap,We=new WeakSet,tt=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),oe.batch(()=>{y(this,Ve).forEach(r=>{r.onMutationUpdate(e)}),y(this,he).notify({mutation:this,type:"updated",action:e})})},ea);function Mc(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qe,qe,Bs,ta,qc=(ta=class extends Ks{constructor(e={}){super();O(this,Qe);O(this,qe);O(this,Bs);this.config=e,k(this,Qe,new Set),k(this,qe,new Map),k(this,Bs,0)}build(e,t,r){const n=new Bc({mutationCache:this,mutationId:++Qs(this,Bs)._,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){y(this,Qe).add(e);const t=Xs(e);if(typeof t=="string"){const r=y(this,qe).get(t);r?r.push(e):y(this,qe).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(y(this,Qe).delete(e)){const t=Xs(e);if(typeof t=="string"){const r=y(this,qe).get(t);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&y(this,qe).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Xs(e);if(typeof t=="string"){const r=y(this,qe).get(t),n=r==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===e}else return!0}runNext(e){var r;const t=Xs(e);if(typeof t=="string"){const n=(r=y(this,qe).get(t))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){oe.batch(()=>{y(this,Qe).forEach(e=>{this.notify({type:"removed",mutation:e})}),y(this,Qe).clear(),y(this,qe).clear()})}getAll(){return Array.from(y(this,Qe))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>ii(t,r))}findAll(e={}){return this.getAll().filter(t=>ii(e,t))}notify(e){oe.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return oe.batch(()=>Promise.all(e.map(t=>t.continue().catch(ve))))}},Qe=new WeakMap,qe=new WeakMap,Bs=new WeakMap,ta);function Xs(s){var e;return(e=s.options.scope)==null?void 0:e.id}function li(s){return{onFetch:(e,t)=>{var u,f,g,h,b;const r=e.options,n=(g=(f=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:g.direction,i=((h=e.state.data)==null?void 0:h.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let m=!1;const p=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},x=Ba(e.options,e.fetchOptions),_=async(w,S,T)=>{if(m)return Promise.reject();if(S==null&&w.pages.length)return Promise.resolve(w);const $=(()=>{const ce={client:e.client,queryKey:e.queryKey,pageParam:S,direction:T?"backward":"forward",meta:e.options.meta};return p(ce),ce})(),L=await x($),{maxPages:I}=e.options,J=T?Oc:Tc;return{pages:J(w.pages,L,I),pageParams:J(w.pageParams,S,I)}};if(n&&i.length){const w=n==="backward",S=w?Kc:ci,T={pages:i,pageParams:o},E=S(r,T);l=await _(T,E,w)}else{const w=s??i.length;do{const S=c===0?o[0]??r.initialPageParam:ci(r,l);if(c>0&&S==null)break;l=await _(l,S),c++}while(c<w)}return l};e.options.persister?e.fetchFn=()=>{var m,p;return(p=(m=e.options).persister)==null?void 0:p.call(m,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=d}}}function ci(s,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?s.getNextPageParam(e[r],e,t[r],t):void 0}function Kc(s,{pages:e,pageParams:t}){var r;return e.length>0?(r=s.getPreviousPageParam)==null?void 0:r.call(s,e[0],e,t[0],t):void 0}var te,at,ot,os,ls,lt,cs,ds,sa,zc=(sa=class{constructor(s={}){O(this,te);O(this,at);O(this,ot);O(this,os);O(this,ls);O(this,lt);O(this,cs);O(this,ds);k(this,te,s.queryCache||new Fc),k(this,at,s.mutationCache||new qc),k(this,ot,s.defaultOptions||{}),k(this,os,new Map),k(this,ls,new Map),k(this,lt,0)}mount(){Qs(this,lt)._++,y(this,lt)===1&&(k(this,cs,Cn.subscribe(async s=>{s&&(await this.resumePausedMutations(),y(this,te).onFocus())})),k(this,ds,hr.subscribe(async s=>{s&&(await this.resumePausedMutations(),y(this,te).onOnline())})))}unmount(){var s,e;Qs(this,lt)._--,y(this,lt)===0&&((s=y(this,cs))==null||s.call(this),k(this,cs,void 0),(e=y(this,ds))==null||e.call(this),k(this,ds,void 0))}isFetching(s){return y(this,te).findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return y(this,at).findAll({...s,status:"pending"}).length}getQueryData(s){var t;const e=this.defaultQueryOptions({queryKey:s});return(t=y(this,te).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(s){const e=this.defaultQueryOptions(s),t=y(this,te).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(s):(s.revalidateIfStale&&t.isStaleByTime(mt(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(s){return y(this,te).findAll(s).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(s,e,t){const r=this.defaultQueryOptions({queryKey:s}),n=y(this,te).get(r.queryHash),i=n==null?void 0:n.state.data,o=Nc(e,i);if(o!==void 0)return y(this,te).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(s,e,t){return oe.batch(()=>y(this,te).findAll(s).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(s){var t;const e=this.defaultQueryOptions({queryKey:s});return(t=y(this,te).get(e.queryHash))==null?void 0:t.state}removeQueries(s){const e=y(this,te);oe.batch(()=>{e.findAll(s).forEach(t=>{e.remove(t)})})}resetQueries(s,e){const t=y(this,te);return oe.batch(()=>(t.findAll(s).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...s},e)))}cancelQueries(s,e={}){const t={revert:!0,...e},r=oe.batch(()=>y(this,te).findAll(s).map(n=>n.cancel(t)));return Promise.all(r).then(ve).catch(ve)}invalidateQueries(s,e={}){return oe.batch(()=>(y(this,te).findAll(s).forEach(t=>{t.invalidate()}),(s==null?void 0:s.refetchType)==="none"?Promise.resolve():this.refetchQueries({...s,type:(s==null?void 0:s.refetchType)??(s==null?void 0:s.type)??"active"},e)))}refetchQueries(s,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=oe.batch(()=>y(this,te).findAll(s).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,t);return t.throwOnError||(i=i.catch(ve)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ve)}fetchQuery(s){const e=this.defaultQueryOptions(s);e.retry===void 0&&(e.retry=!1);const t=y(this,te).build(this,e);return t.isStaleByTime(mt(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(ve).catch(ve)}fetchInfiniteQuery(s){return s.behavior=li(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(ve).catch(ve)}ensureInfiniteQueryData(s){return s.behavior=li(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return hr.isOnline()?y(this,at).resumePausedMutations():Promise.resolve()}getQueryCache(){return y(this,te)}getMutationCache(){return y(this,at)}getDefaultOptions(){return y(this,ot)}setDefaultOptions(s){k(this,ot,s)}setQueryDefaults(s,e){y(this,os).set(Rs(s),{queryKey:s,defaultOptions:e})}getQueryDefaults(s){const e=[...y(this,os).values()],t={};return e.forEach(r=>{As(s,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(s,e){y(this,ls).set(Rs(s),{mutationKey:s,defaultOptions:e})}getMutationDefaults(s){const e=[...y(this,ls).values()],t={};return e.forEach(r=>{As(s,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(s){if(s._defaulted)return s;const e={...y(this,ot).queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return e.queryHash||(e.queryHash=En(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Nn&&(e.enabled=!1),e}defaultMutationOptions(s){return s!=null&&s._defaulted?s:{...y(this,ot).mutations,...(s==null?void 0:s.mutationKey)&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){y(this,te).clear(),y(this,at).clear()}},te=new WeakMap,at=new WeakMap,ot=new WeakMap,os=new WeakMap,ls=new WeakMap,lt=new WeakMap,cs=new WeakMap,ds=new WeakMap,sa),ge,D,Ms,fe,$t,us,ct,dt,qs,hs,fs,Lt,Ut,ut,ms,z,Ss,Yr,Xr,Zr,en,tn,sn,rn,Wa,ra,Vc=(ra=class extends Ks{constructor(e,t){super();O(this,z);O(this,ge);O(this,D);O(this,Ms);O(this,fe);O(this,$t);O(this,us);O(this,ct);O(this,dt);O(this,qs);O(this,hs);O(this,fs);O(this,Lt);O(this,Ut);O(this,ut);O(this,ms,new Set);this.options=t,k(this,ge,e),k(this,dt,null),k(this,ct,Qr()),this.options.experimental_prefetchInRender||y(this,ct).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(y(this,D).addObserver(this),di(y(this,D),this.options)?U(this,z,Ss).call(this):this.updateResult(),U(this,z,en).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return nn(y(this,D),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return nn(y(this,D),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,U(this,z,tn).call(this),U(this,z,sn).call(this),y(this,D).removeObserver(this)}setOptions(e){const t=this.options,r=y(this,D);if(this.options=y(this,ge).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Re(this.options.enabled,y(this,D))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");U(this,z,rn).call(this),y(this,D).setOptions(this.options),t._defaulted&&!Hr(this.options,t)&&y(this,ge).getQueryCache().notify({type:"observerOptionsUpdated",query:y(this,D),observer:this});const n=this.hasListeners();n&&ui(y(this,D),r,this.options,t)&&U(this,z,Ss).call(this),this.updateResult(),n&&(y(this,D)!==r||Re(this.options.enabled,y(this,D))!==Re(t.enabled,y(this,D))||mt(this.options.staleTime,y(this,D))!==mt(t.staleTime,y(this,D)))&&U(this,z,Yr).call(this);const i=U(this,z,Xr).call(this);n&&(y(this,D)!==r||Re(this.options.enabled,y(this,D))!==Re(t.enabled,y(this,D))||i!==y(this,ut))&&U(this,z,Zr).call(this,i)}getOptimisticResult(e){const t=y(this,ge).getQueryCache().build(y(this,ge),e),r=this.createResult(t,e);return Hc(this,r)&&(k(this,fe,r),k(this,us,this.options),k(this,$t,y(this,D).state)),r}getCurrentResult(){return y(this,fe)}trackResult(e,t){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),t==null||t(n),Reflect.get(r,n))})}trackProp(e){y(this,ms).add(e)}getCurrentQuery(){return y(this,D)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=y(this,ge).defaultQueryOptions(e),r=y(this,ge).getQueryCache().build(y(this,ge),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return U(this,z,Ss).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),y(this,fe)))}createResult(e,t){var I;const r=y(this,D),n=this.options,i=y(this,fe),o=y(this,$t),l=y(this,us),d=e!==r?e.state:y(this,Ms),{state:u}=e;let f={...u},g=!1,h;if(t._optimisticResults){const J=this.hasListeners(),ce=!J&&di(e,t),se=J&&ui(e,r,t,n);(ce||se)&&(f={...f,...Va(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:b,errorUpdatedAt:m,status:p}=f;h=f.data;let x=!1;if(t.placeholderData!==void 0&&h===void 0&&p==="pending"){let J;i!=null&&i.isPlaceholderData&&t.placeholderData===(l==null?void 0:l.placeholderData)?(J=i.data,x=!0):J=typeof t.placeholderData=="function"?t.placeholderData((I=y(this,fs))==null?void 0:I.state.data,y(this,fs)):t.placeholderData,J!==void 0&&(p="success",h=Gr(i==null?void 0:i.data,J,t),g=!0)}if(t.select&&h!==void 0&&!x)if(i&&h===(o==null?void 0:o.data)&&t.select===y(this,qs))h=y(this,hs);else try{k(this,qs,t.select),h=t.select(h),h=Gr(i==null?void 0:i.data,h,t),k(this,hs,h),k(this,dt,null)}catch(J){k(this,dt,J)}y(this,dt)&&(b=y(this,dt),h=y(this,hs),m=Date.now(),p="error");const _=f.fetchStatus==="fetching",w=p==="pending",S=p==="error",T=w&&_,E=h!==void 0,L={status:p,fetchStatus:f.fetchStatus,isPending:w,isSuccess:p==="success",isError:S,isInitialLoading:T,isLoading:T,data:h,dataUpdatedAt:f.dataUpdatedAt,error:b,errorUpdatedAt:m,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:_,isRefetching:_&&!w,isLoadingError:S&&!E,isPaused:f.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:S&&E,isStale:Tn(e,t),refetch:this.refetch,promise:y(this,ct),isEnabled:Re(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const J=Ie=>{L.status==="error"?Ie.reject(L.error):L.data!==void 0&&Ie.resolve(L.data)},ce=()=>{const Ie=k(this,ct,L.promise=Qr());J(Ie)},se=y(this,ct);switch(se.status){case"pending":e.queryHash===r.queryHash&&J(se);break;case"fulfilled":(L.status==="error"||L.data!==se.value)&&ce();break;case"rejected":(L.status!=="error"||L.error!==se.reason)&&ce();break}}return L}updateResult(){const e=y(this,fe),t=this.createResult(y(this,D),this.options);if(k(this,$t,y(this,D).state),k(this,us,this.options),y(this,$t).data!==void 0&&k(this,fs,y(this,D)),Hr(t,e))return;k(this,fe,t);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!y(this,ms).size)return!0;const o=new Set(i??y(this,ms));return this.options.throwOnError&&o.add("error"),Object.keys(y(this,fe)).some(l=>{const c=l;return y(this,fe)[c]!==e[c]&&o.has(c)})};U(this,z,Wa).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&U(this,z,en).call(this)}},ge=new WeakMap,D=new WeakMap,Ms=new WeakMap,fe=new WeakMap,$t=new WeakMap,us=new WeakMap,ct=new WeakMap,dt=new WeakMap,qs=new WeakMap,hs=new WeakMap,fs=new WeakMap,Lt=new WeakMap,Ut=new WeakMap,ut=new WeakMap,ms=new WeakMap,z=new WeakSet,Ss=function(e){U(this,z,rn).call(this);let t=y(this,D).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(ve)),t},Yr=function(){U(this,z,tn).call(this);const e=mt(this.options.staleTime,y(this,D));if(Ft||y(this,fe).isStale||!Wr(e))return;const r=Da(y(this,fe).dataUpdatedAt,e)+1;k(this,Lt,setTimeout(()=>{y(this,fe).isStale||this.updateResult()},r))},Xr=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(y(this,D)):this.options.refetchInterval)??!1},Zr=function(e){U(this,z,sn).call(this),k(this,ut,e),!(Ft||Re(this.options.enabled,y(this,D))===!1||!Wr(y(this,ut))||y(this,ut)===0)&&k(this,Ut,setInterval(()=>{(this.options.refetchIntervalInBackground||Cn.isFocused())&&U(this,z,Ss).call(this)},y(this,ut)))},en=function(){U(this,z,Yr).call(this),U(this,z,Zr).call(this,U(this,z,Xr).call(this))},tn=function(){y(this,Lt)&&(clearTimeout(y(this,Lt)),k(this,Lt,void 0))},sn=function(){y(this,Ut)&&(clearInterval(y(this,Ut)),k(this,Ut,void 0))},rn=function(){const e=y(this,ge).getQueryCache().build(y(this,ge),this.options);if(e===y(this,D))return;const t=y(this,D);k(this,D,e),k(this,Ms,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},Wa=function(e){oe.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(y(this,fe))}),y(this,ge).getQueryCache().notify({query:y(this,D),type:"observerResultsUpdated"})})},ra);function Wc(s,e){return Re(e.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&e.retryOnMount===!1)}function di(s,e){return Wc(s,e)||s.state.data!==void 0&&nn(s,e,e.refetchOnMount)}function nn(s,e,t){if(Re(e.enabled,s)!==!1&&mt(e.staleTime,s)!=="static"){const r=typeof t=="function"?t(s):t;return r==="always"||r!==!1&&Tn(s,e)}return!1}function ui(s,e,t,r){return(s!==e||Re(r.enabled,s)===!1)&&(!t.suspense||s.state.status!=="error")&&Tn(s,t)}function Tn(s,e){return Re(e.enabled,s)!==!1&&s.isStaleByTime(mt(e.staleTime,s))}function Hc(s,e){return!Hr(s.getCurrentResult(),e)}var Ha=v.createContext(void 0),Jc=s=>{const e=v.useContext(Ha);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Gc=({client:s,children:e})=>(v.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),a.jsx(Ha.Provider,{value:s,children:e})),Ja=v.createContext(!1),Qc=()=>v.useContext(Ja);Ja.Provider;function Yc(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var Xc=v.createContext(Yc()),Zc=()=>v.useContext(Xc),ed=(s,e)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(e.isReset()||(s.retryOnMount=!1))},td=s=>{v.useEffect(()=>{s.clearReset()},[s])},sd=({result:s,errorResetBoundary:e,throwOnError:t,query:r,suspense:n})=>s.isError&&!e.isReset()&&!s.isFetching&&r&&(n&&s.data===void 0||Pc(t,[s.error,r])),rd=s=>{if(s.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),t=s.staleTime;s.staleTime=typeof t=="function"?(...r)=>e(t(...r)):e(t),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3))}},nd=(s,e)=>s.isLoading&&s.isFetching&&!e,id=(s,e)=>(s==null?void 0:s.suspense)&&e.isPending,hi=(s,e,t)=>e.fetchOptimistic(s).catch(()=>{t.clearReset()});function ad(s,e,t){var f,g,h,b,m;const r=Qc(),n=Zc(),i=Jc(),o=i.defaultQueryOptions(s);(g=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||g.call(f,o),o._optimisticResults=r?"isRestoring":"optimistic",rd(o),ed(o,n),td(n);const l=!i.getQueryCache().get(o.queryHash),[c]=v.useState(()=>new e(i,o)),d=c.getOptimisticResult(o),u=!r&&s.subscribed!==!1;if(v.useSyncExternalStore(v.useCallback(p=>{const x=u?c.subscribe(oe.batchCalls(p)):ve;return c.updateResult(),x},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),v.useEffect(()=>{c.setOptions(o)},[o,c]),id(o,d))throw hi(o,c,n);if(sd({result:d,errorResetBoundary:n,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((b=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||b.call(h,o,d),o.experimental_prefetchInRender&&!Ft&&nd(d,r)){const p=l?hi(o,c,n):(m=i.getQueryCache().get(o.queryHash))==null?void 0:m.promise;p==null||p.catch(ve).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function Ga(s,e){return ad(s,Vc)}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Is(){return Is=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},Is.apply(this,arguments)}var ht;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(ht||(ht={}));const fi="popstate";function od(s){s===void 0&&(s={});function e(n,i){let{pathname:o="/",search:l="",hash:c=""}=Mt(n.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),an("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){let o=n.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=n.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof i=="string"?i:fr(i))}function r(n,i){On(n.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return cd(e,t,r,s)}function ne(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function On(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ld(){return Math.random().toString(36).substr(2,8)}function mi(s,e){return{usr:s.state,key:s.key,idx:e}}function an(s,e,t,r){return t===void 0&&(t=null),Is({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof e=="string"?Mt(e):e,{state:t,key:e&&e.key||r||ld()})}function fr(s){let{pathname:e="/",search:t="",hash:r=""}=s;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Mt(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substr(t),s=s.substr(0,t));let r=s.indexOf("?");r>=0&&(e.search=s.substr(r),s=s.substr(0,r)),s&&(e.pathname=s)}return e}function cd(s,e,t,r){r===void 0&&(r={});let{window:n=document.defaultView,v5Compat:i=!1}=r,o=n.history,l=ht.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(Is({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function f(){l=ht.Pop;let p=u(),x=p==null?null:p-d;d=p,c&&c({action:l,location:m.location,delta:x})}function g(p,x){l=ht.Push;let _=an(m.location,p,x);t&&t(_,p),d=u()+1;let w=mi(_,d),S=m.createHref(_);try{o.pushState(w,"",S)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;n.location.assign(S)}i&&c&&c({action:l,location:m.location,delta:1})}function h(p,x){l=ht.Replace;let _=an(m.location,p,x);t&&t(_,p),d=u();let w=mi(_,d),S=m.createHref(_);o.replaceState(w,"",S),i&&c&&c({action:l,location:m.location,delta:0})}function b(p){let x=n.location.origin!=="null"?n.location.origin:n.location.href,_=typeof p=="string"?p:fr(p);return _=_.replace(/ $/,"%20"),ne(x,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,x)}let m={get action(){return l},get location(){return s(n,o)},listen(p){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(fi,f),c=p,()=>{n.removeEventListener(fi,f),c=null}},createHref(p){return e(n,p)},createURL:b,encodeLocation(p){let x=b(p);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:h,go(p){return o.go(p)}};return m}var pi;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(pi||(pi={}));function dd(s,e,t){return t===void 0&&(t="/"),ud(s,e,t,!1)}function ud(s,e,t,r){let n=typeof e=="string"?Mt(e):e,i=Pn(n.pathname||"/",t);if(i==null)return null;let o=Qa(s);hd(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=jd(i);l=xd(o[c],d,r)}return l}function Qa(s,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let n=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ne(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=pt([r,c.relativePath]),u=t.concat(c);i.children&&i.children.length>0&&(ne(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Qa(i.children,e,u,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:bd(d,i.index),routesMeta:u})};return s.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))n(i,o);else for(let c of Ya(i.path))n(i,o,c)}),e}function Ya(s){let e=s.split("/");if(e.length===0)return[];let[t,...r]=e,n=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return n?[i,""]:[i];let o=Ya(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),n&&l.push(...o),l.map(c=>s.startsWith("/")&&c===""?"/":c)}function hd(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:wd(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const fd=/^:[\w-]+$/,md=3,pd=2,gd=1,yd=10,vd=-2,gi=s=>s==="*";function bd(s,e){let t=s.split("/"),r=t.length;return t.some(gi)&&(r+=vd),e&&(r+=pd),t.filter(n=>!gi(n)).reduce((n,i)=>n+(fd.test(i)?md:i===""?gd:yd),r)}function wd(s,e){return s.length===e.length&&s.slice(0,-1).every((r,n)=>r===e[n])?s[s.length-1]-e[e.length-1]:0}function xd(s,e,t){let{routesMeta:r}=s,n={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",f=yi({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),g=c.route;if(!f&&d&&t&&!r[r.length-1].route.index&&(f=yi({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!f)return null;Object.assign(n,f.params),o.push({params:n,pathname:pt([i,f.pathname]),pathnameBase:Nd(pt([i,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(i=pt([i,f.pathnameBase]))}return o}function yi(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,r]=_d(s.path,s.caseSensitive,s.end),n=e.match(t);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:r.reduce((d,u,f)=>{let{paramName:g,isOptional:h}=u;if(g==="*"){let m=l[f]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const b=l[f];return h&&!b?d[g]=void 0:d[g]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:s}}function _d(s,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),On(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let r=[],n="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(r.push({paramName:"*"}),n+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":s!==""&&s!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),r]}function jd(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return On(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),s}}function Pn(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=s.charAt(t);return r&&r!=="/"?null:s.slice(t)||"/"}function Sd(s,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:n=""}=typeof s=="string"?Mt(s):s;return{pathname:t?t.startsWith("/")?t:kd(t,e):e,search:Cd(r),hash:Td(n)}}function kd(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function $r(s,e,t,r){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ed(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Xa(s,e){let t=Ed(s);return e?t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Za(s,e,t,r){r===void 0&&(r=!1);let n;typeof s=="string"?n=Mt(s):(n=Is({},s),ne(!n.pathname||!n.pathname.includes("?"),$r("?","pathname","search",n)),ne(!n.pathname||!n.pathname.includes("#"),$r("#","pathname","hash",n)),ne(!n.search||!n.search.includes("#"),$r("#","search","hash",n)));let i=s===""||n.pathname==="",o=i?"/":n.pathname,l;if(o==null)l=t;else{let f=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),f-=1;n.pathname=g.join("/")}l=f>=0?e[f]:"/"}let c=Sd(n,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const pt=s=>s.join("/").replace(/\/\/+/g,"/"),Nd=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Cd=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Td=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function Od(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const eo=["post","put","patch","delete"];new Set(eo);const Pd=["get",...eo];new Set(Pd);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $s(){return $s=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},$s.apply(this,arguments)}const Rn=v.createContext(null),Rd=v.createContext(null),qt=v.createContext(null),_r=v.createContext(null),yt=v.createContext({outlet:null,matches:[],isDataRoute:!1}),to=v.createContext(null);function Ad(s,e){let{relative:t}=e===void 0?{}:e;zs()||ne(!1);let{basename:r,navigator:n}=v.useContext(qt),{hash:i,pathname:o,search:l}=ro(s,{relative:t}),c=o;return r!=="/"&&(c=o==="/"?r:pt([r,o])),n.createHref({pathname:c,search:l,hash:i})}function zs(){return v.useContext(_r)!=null}function gs(){return zs()||ne(!1),v.useContext(_r).location}function so(s){v.useContext(qt).static||v.useLayoutEffect(s)}function Ae(){let{isDataRoute:s}=v.useContext(yt);return s?Hd():Id()}function Id(){zs()||ne(!1);let s=v.useContext(Rn),{basename:e,future:t,navigator:r}=v.useContext(qt),{matches:n}=v.useContext(yt),{pathname:i}=gs(),o=JSON.stringify(Xa(n,t.v7_relativeSplatPath)),l=v.useRef(!1);return so(()=>{l.current=!0}),v.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=Za(d,JSON.parse(o),i,u.relative==="path");s==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:pt([e,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[e,r,o,i,s])}function $d(){let{matches:s}=v.useContext(yt),e=s[s.length-1];return e?e.params:{}}function ro(s,e){let{relative:t}=e===void 0?{}:e,{future:r}=v.useContext(qt),{matches:n}=v.useContext(yt),{pathname:i}=gs(),o=JSON.stringify(Xa(n,r.v7_relativeSplatPath));return v.useMemo(()=>Za(s,JSON.parse(o),i,t==="path"),[s,o,i,t])}function Ld(s,e){return Ud(s,e)}function Ud(s,e,t,r){zs()||ne(!1);let{navigator:n}=v.useContext(qt),{matches:i}=v.useContext(yt),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=gs(),u;if(e){var f;let p=typeof e=="string"?Mt(e):e;c==="/"||(f=p.pathname)!=null&&f.startsWith(c)||ne(!1),u=p}else u=d;let g=u.pathname||"/",h=g;if(c!=="/"){let p=c.replace(/^\//,"").split("/");h="/"+g.replace(/^\//,"").split("/").slice(p.length).join("/")}let b=dd(s,{pathname:h}),m=qd(b&&b.map(p=>Object.assign({},p,{params:Object.assign({},l,p.params),pathname:pt([c,n.encodeLocation?n.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?c:pt([c,n.encodeLocation?n.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),i,t,r);return e&&m?v.createElement(_r.Provider,{value:{location:$s({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ht.Pop}},m):m}function Dd(){let s=Wd(),e=Od(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),t?v.createElement("pre",{style:n},t):null,null)}const Fd=v.createElement(Dd,null);class Bd extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?v.createElement(yt.Provider,{value:this.props.routeContext},v.createElement(to.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Md(s){let{routeContext:e,match:t,children:r}=s,n=v.useContext(Rn);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(yt.Provider,{value:e},r)}function qd(s,e,t,r){var n;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),s==null){var i;if(!t)return null;if(t.errors)s=t.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let o=s,l=(n=t)==null?void 0:n.errors;if(l!=null){let u=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);u>=0||ne(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(t&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=u),f.route.id){let{loaderData:g,errors:h}=t,b=f.route.loader&&g[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||b){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,f,g)=>{let h,b=!1,m=null,p=null;t&&(h=l&&f.route.id?l[f.route.id]:void 0,m=f.route.errorElement||Fd,c&&(d<0&&g===0?(b=!0,p=null):d===g&&(b=!0,p=f.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,g+1)),_=()=>{let w;return h?w=m:b?w=p:f.route.Component?w=v.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=u,v.createElement(Md,{match:f,routeContext:{outlet:u,matches:x,isDataRoute:t!=null},children:w})};return t&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?v.createElement(Bd,{location:t.location,revalidation:t.revalidation,component:m,error:h,children:_(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):_()},null)}var no=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(no||{}),mr=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(mr||{});function Kd(s){let e=v.useContext(Rn);return e||ne(!1),e}function zd(s){let e=v.useContext(Rd);return e||ne(!1),e}function Vd(s){let e=v.useContext(yt);return e||ne(!1),e}function io(s){let e=Vd(),t=e.matches[e.matches.length-1];return t.route.id||ne(!1),t.route.id}function Wd(){var s;let e=v.useContext(to),t=zd(mr.UseRouteError),r=io(mr.UseRouteError);return e!==void 0?e:(s=t.errors)==null?void 0:s[r]}function Hd(){let{router:s}=Kd(no.UseNavigateStable),e=io(mr.UseNavigateStable),t=v.useRef(!1);return so(()=>{t.current=!0}),v.useCallback(function(n,i){i===void 0&&(i={}),t.current&&(typeof n=="number"?s.navigate(n):s.navigate(n,$s({fromRouteId:e},i)))},[s,e])}function Jd(s,e){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function xe(s){ne(!1)}function Gd(s){let{basename:e="/",children:t=null,location:r,navigationType:n=ht.Pop,navigator:i,static:o=!1,future:l}=s;zs()&&ne(!1);let c=e.replace(/^\/*/,"/"),d=v.useMemo(()=>({basename:c,navigator:i,static:o,future:$s({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Mt(r));let{pathname:u="/",search:f="",hash:g="",state:h=null,key:b="default"}=r,m=v.useMemo(()=>{let p=Pn(u,c);return p==null?null:{location:{pathname:p,search:f,hash:g,state:h,key:b},navigationType:n}},[c,u,f,g,h,b,n]);return m==null?null:v.createElement(qt.Provider,{value:d},v.createElement(_r.Provider,{children:t,value:m}))}function Qd(s){let{children:e,location:t}=s;return Ld(on(e),t)}new Promise(()=>{});function on(s,e){e===void 0&&(e=[]);let t=[];return v.Children.forEach(s,(r,n)=>{if(!v.isValidElement(r))return;let i=[...e,n];if(r.type===v.Fragment){t.push.apply(t,on(r.props.children,i));return}r.type!==xe&&ne(!1),!r.props.index||!r.props.children||ne(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=on(r.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ln(){return ln=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},ln.apply(this,arguments)}function Yd(s,e){if(s==null)return{};var t={},r=Object.keys(s),n,i;for(i=0;i<r.length;i++)n=r[i],!(e.indexOf(n)>=0)&&(t[n]=s[n]);return t}function Xd(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function Zd(s,e){return s.button===0&&(!e||e==="_self")&&!Xd(s)}function cn(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let r=s[t];return e.concat(Array.isArray(r)?r.map(n=>[t,n]):[[t,r]])},[]))}function eu(s,e){let t=cn(s);return e&&e.forEach((r,n)=>{t.has(n)||e.getAll(n).forEach(i=>{t.append(n,i)})}),t}const tu=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],su="6";try{window.__reactRouterVersion=su}catch{}const ru="startTransition",vi=ml[ru];function nu(s){let{basename:e,children:t,future:r,window:n}=s,i=v.useRef();i.current==null&&(i.current=od({window:n,v5Compat:!0}));let o=i.current,[l,c]=v.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},u=v.useCallback(f=>{d&&vi?vi(()=>c(f)):c(f)},[c,d]);return v.useLayoutEffect(()=>o.listen(u),[o,u]),v.useEffect(()=>Jd(r),[r]),v.createElement(Gd,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o,future:r})}const iu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",au=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M=v.forwardRef(function(e,t){let{onClick:r,relative:n,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:f}=e,g=Yd(e,tu),{basename:h}=v.useContext(qt),b,m=!1;if(typeof d=="string"&&au.test(d)&&(b=d,iu))try{let w=new URL(window.location.href),S=d.startsWith("//")?new URL(w.protocol+d):new URL(d),T=Pn(S.pathname,h);S.origin===w.origin&&T!=null?d=T+S.search+S.hash:m=!0}catch{}let p=Ad(d,{relative:n}),x=ou(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:n,viewTransition:f});function _(w){r&&r(w),w.defaultPrevented||x(w)}return v.createElement("a",ln({},g,{href:b||p,onClick:m||i?r:_,ref:t,target:c}))});var bi;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(bi||(bi={}));var wi;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(wi||(wi={}));function ou(s,e){let{target:t,replace:r,state:n,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=Ae(),d=gs(),u=ro(s,{relative:o});return v.useCallback(f=>{if(Zd(f,t)){f.preventDefault();let g=r!==void 0?r:fr(d)===fr(u);c(s,{replace:g,state:n,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,r,n,t,s,i,o,l])}function An(s){let e=v.useRef(cn(s)),t=v.useRef(!1),r=gs(),n=v.useMemo(()=>eu(r.search,t.current?null:e.current),[r.search]),i=Ae(),o=v.useCallback((l,c)=>{const d=cn(typeof l=="function"?l(n):l);t.current=!0,i("?"+d,c)},[i,n]);return[n,o]}const lu=wr("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),A=v.forwardRef(({className:s,variant:e,size:t,asChild:r=!1,...n},i)=>{const o=r?tl:"button";return a.jsx(o,{className:q(lu({variant:e,size:t,className:s})),ref:i,...n})});A.displayName="Button";const cu="modulepreload",du=function(s){return"/Kazi-Connect/"+s},xi={},ys=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(t.map(c=>{if(c=du(c),c in xi)return;xi[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":cu,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((g,h)=>{f.addEventListener("load",g),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},uu=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>ys(async()=>{const{default:r}=await Promise.resolve().then(()=>Kt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class In extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class _i extends In{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ji extends In{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Si extends In{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var dn;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(dn||(dn={}));class hu{constructor(e,{headers:t={},customFetch:r,region:n=dn.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=uu(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return N(this,arguments,void 0,function*(t,r={}){var n;try{const{headers:i,method:o,body:l,signal:c}=r;let d={},{region:u}=r;u||(u=this.region);const f=new URL(`${this.url}/${t}`);u&&u!=="any"&&(d["x-region"]=u,f.searchParams.set("forceFunctionRegion",u));let g;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",g=l):typeof l=="string"?(d["Content-Type"]="text/plain",g=l):typeof FormData<"u"&&l instanceof FormData?g=l:(d["Content-Type"]="application/json",g=JSON.stringify(l)):g=l;const h=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),i),body:g,signal:c}).catch(x=>{throw x.name==="AbortError"?x:new _i(x)}),b=h.headers.get("x-relay-error");if(b&&b==="true")throw new ji(h);if(!h.ok)throw new Si(h);let m=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return m==="application/json"?p=yield h.json():m==="application/octet-stream"||m==="application/pdf"?p=yield h.blob():m==="text/event-stream"?p=h:m==="multipart/form-data"?p=yield h.formData():p=yield h.text(),{data:p,error:null,response:h}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new _i(i)}:{data:null,error:i,response:i instanceof Si||i instanceof ji?i.context:void 0}}})}}var be={};const vs=ja(sl);var Zs={},er={},tr={},sr={},rr={},fu=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ps=fu();const mu=ps.fetch,ao=ps.fetch.bind(ps),oo=ps.Headers,pu=ps.Request,gu=ps.Response,Kt=Object.freeze(Object.defineProperty({__proto__:null,Headers:oo,Request:pu,Response:gu,default:ao,fetch:mu},Symbol.toStringTag,{value:"Module"})),yu=ja(Kt);var nr={},ki;function lo(){if(ki)return nr;ki=1,Object.defineProperty(nr,"__esModule",{value:!0});class s extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return nr.default=s,nr}var Ei;function co(){if(Ei)return rr;Ei=1,Object.defineProperty(rr,"__esModule",{value:!0});const s=vs,e=s.__importDefault(yu),t=s.__importDefault(lo());class r{constructor(i){var o,l;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(l=i.isMaybeSingle)!==null&&l!==void 0?l:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var u,f,g,h;let b=null,m=null,p=null,x=d.status,_=d.statusText;if(d.ok){if(this.method!=="HEAD"){const E=await d.text();E===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?m=E:m=JSON.parse(E))}const S=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),T=(g=d.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");S&&T&&T.length>1&&(p=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(b={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,p=null,x=406,_="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const S=await d.text();try{b=JSON.parse(S),Array.isArray(b)&&d.status===404&&(m=[],b=null,x=200,_="OK")}catch{d.status===404&&S===""?(x=204,_="No Content"):b={message:S}}if(b&&this.isMaybeSingle&&(!((h=b==null?void 0:b.details)===null||h===void 0)&&h.includes("0 rows"))&&(b=null,x=200,_="OK"),b&&this.shouldThrowOnError)throw new t.default(b)}return{error:b,data:m,count:p,status:x,statusText:_}});return this.shouldThrowOnError||(c=c.catch(d=>{var u,f,g;return{error:{message:`${(u=d==null?void 0:d.name)!==null&&u!==void 0?u:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(f=d==null?void 0:d.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(g=d==null?void 0:d.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),c.then(i,o)}returns(){return this}overrideTypes(){return this}}return rr.default=r,rr}var Ni;function uo(){if(Ni)return sr;Ni=1,Object.defineProperty(sr,"__esModule",{value:!0});const e=vs.__importDefault(co());class t extends e.default{select(n){let i=!1;const o=(n??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:"order",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:""}${n}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${n}`),this}range(n,i,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${n}`),this.url.searchParams.set(d,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:d="text"}={}){var u;const f=[n?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),g=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${g}"; options=${f};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}}return sr.default=t,sr}var Ci;function $n(){if(Ci)return tr;Ci=1,Object.defineProperty(tr,"__esModule",{value:!0});const e=vs.__importDefault(uo());class t extends e.default{eq(n,i){return this.url.searchParams.append(n,`eq.${i}`),this}neq(n,i){return this.url.searchParams.append(n,`neq.${i}`),this}gt(n,i){return this.url.searchParams.append(n,`gt.${i}`),this}gte(n,i){return this.url.searchParams.append(n,`gte.${i}`),this}lt(n,i){return this.url.searchParams.append(n,`lt.${i}`),this}lte(n,i){return this.url.searchParams.append(n,`lte.${i}`),this}like(n,i){return this.url.searchParams.append(n,`like.${i}`),this}likeAllOf(n,i){return this.url.searchParams.append(n,`like(all).{${i.join(",")}}`),this}likeAnyOf(n,i){return this.url.searchParams.append(n,`like(any).{${i.join(",")}}`),this}ilike(n,i){return this.url.searchParams.append(n,`ilike.${i}`),this}ilikeAllOf(n,i){return this.url.searchParams.append(n,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(n,i){return this.url.searchParams.append(n,`ilike(any).{${i.join(",")}}`),this}is(n,i){return this.url.searchParams.append(n,`is.${i}`),this}in(n,i){const o=Array.from(new Set(i)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(n,`in.(${o})`),this}contains(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cs.{${i.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(i)}`),this}containedBy(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cd.{${i.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(i)}`),this}rangeGt(n,i){return this.url.searchParams.append(n,`sr.${i}`),this}rangeGte(n,i){return this.url.searchParams.append(n,`nxl.${i}`),this}rangeLt(n,i){return this.url.searchParams.append(n,`sl.${i}`),this}rangeLte(n,i){return this.url.searchParams.append(n,`nxr.${i}`),this}rangeAdjacent(n,i){return this.url.searchParams.append(n,`adj.${i}`),this}overlaps(n,i){return typeof i=="string"?this.url.searchParams.append(n,`ov.${i}`):this.url.searchParams.append(n,`ov.{${i.join(",")}}`),this}textSearch(n,i,{config:o,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(n,`${c}fts${d}.${i}`),this}match(n){return Object.entries(n).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(n,i,o){return this.url.searchParams.append(n,`not.${i}.${o}`),this}or(n,{foreignTable:i,referencedTable:o=i}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${n})`),this}filter(n,i,o){return this.url.searchParams.append(n,`${i}.${o}`),this}}return tr.default=t,tr}var Ti;function ho(){if(Ti)return er;Ti=1,Object.defineProperty(er,"__esModule",{value:!0});const e=vs.__importDefault($n());class t{constructor(n,{headers:i={},schema:o,fetch:l}){this.url=n,this.headers=new Headers(i),this.schema=o,this.fetch=l}select(n,i){const{head:o=!1,count:l}=i??{},c=o?"HEAD":"GET";let d=!1;const u=(n??"*").split("").map(f=>/\s/.test(f)&&!d?"":(f==='"'&&(d=!d),f)).join("");return this.url.searchParams.set("select",u),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:i,defaultToNull:o=!0}={}){var l;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const d=n.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(d.length>0){const u=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(n,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){var d;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const f=n.reduce((g,h)=>g.concat(Object.keys(h)),[]);if(f.length>0){const g=[...new Set(f)].map(h=>`"${h}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(n,{count:i}={}){var o;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:n}={}){var i;const o="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return er.default=t,er}var Oi;function vu(){if(Oi)return Zs;Oi=1,Object.defineProperty(Zs,"__esModule",{value:!0});const s=vs,e=s.__importDefault(ho()),t=s.__importDefault($n());class r{constructor(i,{headers:o={},schema:l,fetch:c}={}){this.url=i,this.headers=new Headers(o),this.schemaName=l,this.fetch=c}from(i){const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new r(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:c=!1,count:d}={}){var u;let f;const g=new URL(`${this.url}/rpc/${i}`);let h;l||c?(f=l?"HEAD":"GET",Object.entries(o).filter(([m,p])=>p!==void 0).map(([m,p])=>[m,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([m,p])=>{g.searchParams.append(m,p)})):(f="POST",h=o);const b=new Headers(this.headers);return d&&b.set("Prefer",`count=${d}`),new t.default({method:f,url:g,headers:b,schema:this.schemaName,body:h,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Zs.default=r,Zs}Object.defineProperty(be,"__esModule",{value:!0});be.PostgrestError=be.PostgrestBuilder=be.PostgrestTransformBuilder=be.PostgrestFilterBuilder=be.PostgrestQueryBuilder=be.PostgrestClient=void 0;const bs=vs,fo=bs.__importDefault(vu());be.PostgrestClient=fo.default;const mo=bs.__importDefault(ho());be.PostgrestQueryBuilder=mo.default;const po=bs.__importDefault($n());be.PostgrestFilterBuilder=po.default;const go=bs.__importDefault(uo());be.PostgrestTransformBuilder=go.default;const yo=bs.__importDefault(co());be.PostgrestBuilder=yo.default;const vo=bs.__importDefault(lo());be.PostgrestError=vo.default;var bu=be.default={PostgrestClient:fo.default,PostgrestQueryBuilder:mo.default,PostgrestFilterBuilder:po.default,PostgrestTransformBuilder:go.default,PostgrestBuilder:yo.default,PostgrestError:vo.default};const{PostgrestClient:wu,PostgrestQueryBuilder:um,PostgrestFilterBuilder:hm,PostgrestTransformBuilder:fm,PostgrestBuilder:mm,PostgrestError:pm}=bu;class xu{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,n=parseInt(r.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const _u="2.76.1",ju=`realtime-js/${_u}`,Su="1.0.0",un=1e4,ku=1e3,Eu=100;var Ns;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Ns||(Ns={}));var ie;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(ie||(ie={}));var Ke;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Ke||(Ke={}));var hn;(function(s){s.websocket="websocket"})(hn||(hn={}));var Et;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Et||(Et={}));class Nu{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+n));o=o+n;const c=r.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class bo{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var G;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(G||(G={}));const Pi=(s,e,t={})=>{var r;const n=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=Cu(o,s,e,n),i),{}):{}},Cu=(s,e,t,r)=>{const n=e.find(l=>l.name===s),i=n==null?void 0:n.type,o=t[s];return i&&!r.includes(i)?wo(i,o):fn(o)},wo=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return Ru(e,t)}switch(s){case G.bool:return Tu(e);case G.float4:case G.float8:case G.int2:case G.int4:case G.int8:case G.numeric:case G.oid:return Ou(e);case G.json:case G.jsonb:return Pu(e);case G.timestamp:return Au(e);case G.abstime:case G.date:case G.daterange:case G.int4range:case G.int8range:case G.money:case G.reltime:case G.text:case G.time:case G.timestamptz:case G.timetz:case G.tsrange:case G.tstzrange:return fn(e);default:return fn(e)}},fn=s=>s,Tu=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Ou=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},Pu=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},Ru=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,r=s[t];if(s[0]==="{"&&r==="}"){let i;const o=s.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>wo(e,l))}return s},Au=s=>typeof s=="string"?s.replace(" ","T"):s,xo=s=>{const e=new URL(s);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Lr{constructor(e,t,r={},n=un){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ri;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Ri||(Ri={}));class Cs{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Cs.syncState(this.state,n,i,o),this.pendingDiffs.forEach(c=>{this.state=Cs.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Cs.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const i=this.cloneDeep(e),o=this.transformState(t),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const f=i[d];if(f){const g=u.map(p=>p.presence_ref),h=f.map(p=>p.presence_ref),b=u.filter(p=>h.indexOf(p.presence_ref)<0),m=f.filter(p=>g.indexOf(p.presence_ref)<0);b.length>0&&(l[d]=b),m.length>0&&(c[d]=m)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},r,n)}static syncDiff(e,t,r,n){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const f=e[l].map(h=>h.presence_ref),g=u.filter(h=>f.indexOf(h.presence_ref)<0);e[l].unshift(...g)}r(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(f=>f.presence_ref);d=d.filter(f=>u.indexOf(f.presence_ref)<0),e[l]=d,n(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return"metas"in n?t[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ai;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Ai||(Ai={}));var Ts;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Ts||(Ts={}));var Ge;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Ge||(Ge={}));class Ln{constructor(e,t={config:{}},r){var n,i;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=ie.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Lr(this,Ke.join,this.params,this.timeout),this.rejoinTimer=new bo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ie.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ie.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ke.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Cs(this),this.broadcastEndpointURL=xo(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ie.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&n!==void 0?n:[],u=!!this.bindings[Ts.PRESENCE]&&this.bindings[Ts.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},g={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(h=>e==null?void 0:e(Ge.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(Ge.CLOSED)),this.updateJoinPayload(Object.assign({config:g},f)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:h})=>{var b;if(this.socket.setAuth(),h===void 0){e==null||e(Ge.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,p=(b=m==null?void 0:m.length)!==null&&b!==void 0?b:0,x=[];for(let _=0;_<p;_++){const w=m[_],{filter:{event:S,schema:T,table:E,filter:$}}=w,L=h&&h[_];if(L&&L.event===S&&L.schema===T&&L.table===E&&L.filter===$)x.push(Object.assign(Object.assign({},w),{id:L.id}));else{this.unsubscribe(),this.state=ie.errored,e==null||e(Ge.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(Ge.SUBSCRIBED);return}}).receive("error",h=>{this.state=ie.errored,e==null||e(Ge.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ge.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===ie.joined&&e===Ts.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var n;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(e,t={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ie.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ke.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new Lr(this,Ke.leave,{},e),r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ie.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Lr(this,e,t,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Eu){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Ke;if(r&&[l,c,d,u].indexOf(o)>=0&&r!==this._joinRef())return;let g=this._onMessage(o,t,r);if(t&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(h=>{var b,m,p;return((b=h.filter)===null||b===void 0?void 0:b.event)==="*"||((p=(m=h.filter)===null||m===void 0?void 0:m.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===o}).map(h=>h.callback(g,r)):(i=this.bindings[o])===null||i===void 0||i.filter(h=>{var b,m,p,x,_,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const S=h.id,T=(b=h.filter)===null||b===void 0?void 0:b.event;return S&&((m=t.ids)===null||m===void 0?void 0:m.includes(S))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((p=t.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const S=(_=(x=h==null?void 0:h.filter)===null||x===void 0?void 0:x.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return S==="*"||S===((w=t==null?void 0:t.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof g=="object"&&"ids"in g){const b=g.data,{schema:m,table:p,commit_timestamp:x,type:_,errors:w}=b;g=Object.assign(Object.assign({},{schema:m,table:p,commit_timestamp:x,eventType:_,new:{},old:{},errors:w}),this._getPayloadRecords(b))}h.callback(g,r)})}_isClosed(){return this.state===ie.closed}_isJoined(){return this.state===ie.joined}_isJoining(){return this.state===ie.joining}_isLeaving(){return this.state===ie.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Ln.isEqual(n.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ke.close,{},e)}_onError(e){this._on(Ke.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ie.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Pi(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Pi(e.columns,e.old_record)),t}}const Ur=()=>{},ir={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Iu=[1e3,2e3,5e3,1e4],$u=1e4,Lu=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Uu{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=un,this.transport=null,this.heartbeatIntervalMs=ir.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ur,this.ref=0,this.reconnectTimer=null,this.logger=Ur,this.conn=null,this.sendBuffer=[],this.serializer=new Nu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let i;return n?i=n:typeof fetch>"u"?i=(...o)=>ys(async()=>{const{default:l}=await Promise.resolve().then(()=>Kt);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${hn.websocket}`,this.httpEndpoint=xo(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xu.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Su}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ns.connecting:return Et.Connecting;case Ns.open:return Et.Open;case Ns.closing:return Et.Closing;default:return Et.Closed}}isConnected(){return this.connectionState()===Et.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===r);if(n)return n;{const i=new Ln(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:n,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ku,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},ir.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:n,payload:i,ref:o}=t,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${n} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(n,i,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ke.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${r}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([Lu],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const n={access_token:t,version:ju};t&&r.updateJoinPayload(n),r.joinedOnce&&r._isJoined()&&r._push(Ke.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new bo(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ir.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,n,i,o,l,c,d,u;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:un,this.heartbeatIntervalMs=(n=e==null?void 0:e.heartbeatIntervalMs)!==null&&n!==void 0?n:ir.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:Ur,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:f=>Iu[f-1]||$u,this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(f,g)=>g(JSON.stringify(f)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Un extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Z(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class Du extends Un{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mn extends Un{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Dn=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>ys(async()=>{const{default:r}=await Promise.resolve().then(()=>Kt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Fu=()=>N(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ys(()=>Promise.resolve().then(()=>Kt),void 0)).Response:Response}),pn=s=>{if(Array.isArray(s))return s.map(t=>pn(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,r])=>{const n=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=pn(r)}),e},Bu=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Dr=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Mu=(s,e,t)=>N(void 0,void 0,void 0,function*(){const r=yield Fu();s instanceof r&&!(t!=null&&t.noResolveJson)?s.json().then(n=>{const i=s.status||500,o=(n==null?void 0:n.statusCode)||i+"";e(new Du(Dr(n),i,o))}).catch(n=>{e(new mn(Dr(n),n))}):e(new mn(Dr(s),s))}),qu=(s,e,t,r)=>{const n={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"||!r?n:(Bu(r)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r)):n.body=r,e!=null&&e.duplex&&(n.duplex=e.duplex),Object.assign(Object.assign({},n),t))};function Vs(s,e,t,r,n,i){return N(this,void 0,void 0,function*(){return new Promise((o,l)=>{s(t,qu(e,r,n,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Mu(c,l,r))})})}function Ls(s,e,t,r){return N(this,void 0,void 0,function*(){return Vs(s,"GET",e,t,r)})}function Be(s,e,t,r,n){return N(this,void 0,void 0,function*(){return Vs(s,"POST",e,r,n,t)})}function gn(s,e,t,r,n){return N(this,void 0,void 0,function*(){return Vs(s,"PUT",e,r,n,t)})}function Ku(s,e,t,r){return N(this,void 0,void 0,function*(){return Vs(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Fn(s,e,t,r,n){return N(this,void 0,void 0,function*(){return Vs(s,"DELETE",e,r,n,t)})}class zu{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return N(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Z(e))return{data:null,error:e};throw e}})}}var _o;class Vu{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[_o]="BlobDownloadBuilder",this.promise=null}asStream(){return new zu(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return N(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Z(e))return{data:null,error:e};throw e}})}}_o=Symbol.toStringTag;const Wu={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ii={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Hu{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Dn(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,n){return N(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Ii),n);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const d=this._removeEmptyFolders(t),u=this._getFinalPath(d),f=yield(e=="PUT"?gn:Be)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Z(i))return{data:null,error:i};throw i}})}upload(e,t,r){return N(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return N(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:Ii.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const f=yield gn(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Z(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return N(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const i=yield Be(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Un("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}})}update(e,t,r){return N(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return N(this,void 0,void 0,function*(){try{return{data:yield Be(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}})}copy(e,t,r){return N(this,void 0,void 0,function*(){try{return{data:{path:(yield Be(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return N(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Be(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return N(this,void 0,void 0,function*(){try{const n=yield Be(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}})}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(e),c=()=>Ls(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new Vu(c,this.shouldThrowOnError)}info(e){return N(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Ls(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:pn(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}})}exists(e){return N(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Ku(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Z(r)&&r instanceof mn){const n=r.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(e){return N(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Z(t))return{data:null,error:t};throw t}})}list(e,t,r){return N(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Wu),t),{prefix:e||""});return{data:yield Be(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}})}listV2(e,t){return N(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Be(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const jo="2.76.1",So={"X-Client-Info":`storage-js/${jo}`};class Ju{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const i=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},So),t),this.fetch=Dn(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return N(this,void 0,void 0,function*(){try{return{data:yield Ls(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Z(e))return{data:null,error:e};throw e}})}getBucket(e){return N(this,void 0,void 0,function*(){try{return{data:yield Ls(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Z(t))return{data:null,error:t};throw t}})}createBucket(e){return N(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield Be(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Z(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return N(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Z(r))return{data:null,error:r};throw r}})}emptyBucket(e){return N(this,void 0,void 0,function*(){try{return{data:yield Be(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Z(t))return{data:null,error:t};throw t}})}deleteBucket(e){return N(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Z(t))return{data:null,error:t};throw t}})}}class Gu{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},So),t),this.fetch=Dn(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return N(this,void 0,void 0,function*(){try{return{data:yield Be(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Z(t))return{data:null,error:t};throw t}})}listBuckets(e){return N(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const r=t.toString(),n=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`,i=yield Ls(this.fetch,n,{headers:this.headers});return{data:Array.isArray(i)?i.filter(l=>l.type==="ANALYTICS"):[],error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Z(t))return{data:null,error:t};throw t}})}deleteBucket(e){return N(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Z(t))return{data:null,error:t};throw t}})}}const Bn={"X-Client-Info":`storage-js/${jo}`,"Content-Type":"application/json"};class ko extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Se(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}class Fr extends ko{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Qu extends ko{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var $i;(function(s){s.InternalError="InternalError",s.S3VectorConflictException="S3VectorConflictException",s.S3VectorNotFoundException="S3VectorNotFoundException",s.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",s.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",s.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})($i||($i={}));const Mn=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>ys(async()=>{const{default:r}=await Promise.resolve().then(()=>Kt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Yu=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Li=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Xu=(s,e,t)=>N(void 0,void 0,void 0,function*(){if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!(t!=null&&t.noResolveJson)){const n=s.status||500,i=s;if(typeof i.json=="function")i.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||n+"";e(new Fr(Li(o),n,l))}).catch(()=>{const o=n+"",l=i.statusText||`HTTP ${n} error`;e(new Fr(l,n,o))});else{const o=n+"",l=i.statusText||`HTTP ${n} error`;e(new Fr(l,n,o))}}else e(new Qu(Li(s),s))}),Zu=(s,e,t,r)=>{const n={method:s,headers:(e==null?void 0:e.headers)||{}};return r?(Yu(r)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r)):n.body=r,Object.assign(Object.assign({},n),t)):n};function eh(s,e,t,r,n,i){return N(this,void 0,void 0,function*(){return new Promise((o,l)=>{s(t,Zu(e,r,n,i)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>Xu(c,l,r))})})}function ke(s,e,t,r,n){return N(this,void 0,void 0,function*(){return eh(s,"POST",e,r,n,t)})}class th{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Bn),t),this.fetch=Mn(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return N(this,void 0,void 0,function*(){try{return{data:(yield ke(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Se(t))return{data:null,error:t};throw t}})}getIndex(e,t){return N(this,void 0,void 0,function*(){try{return{data:yield ke(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Se(r))return{data:null,error:r};throw r}})}listIndexes(e){return N(this,void 0,void 0,function*(){try{return{data:yield ke(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Se(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return N(this,void 0,void 0,function*(){try{return{data:(yield ke(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Se(r))return{data:null,error:r};throw r}})}}class sh{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Bn),t),this.fetch=Mn(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return N(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ke(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Se(t))return{data:null,error:t};throw t}})}getVectors(e){return N(this,void 0,void 0,function*(){try{return{data:yield ke(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Se(t))return{data:null,error:t};throw t}})}listVectors(e){return N(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield ke(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Se(t))return{data:null,error:t};throw t}})}queryVectors(e){return N(this,void 0,void 0,function*(){try{return{data:yield ke(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Se(t))return{data:null,error:t};throw t}})}deleteVectors(e){return N(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ke(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Se(t))return{data:null,error:t};throw t}})}}class rh{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Bn),t),this.fetch=Mn(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return N(this,void 0,void 0,function*(){try{return{data:(yield ke(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Se(t))return{data:null,error:t};throw t}})}getBucket(e){return N(this,void 0,void 0,function*(){try{return{data:yield ke(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Se(t))return{data:null,error:t};throw t}})}listBuckets(){return N(this,arguments,void 0,function*(e={}){try{return{data:yield ke(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Se(t))return{data:null,error:t};throw t}})}deleteBucket(e){return N(this,void 0,void 0,function*(){try{return{data:(yield ke(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Se(t))return{data:null,error:t};throw t}})}}class nh extends rh{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new ih(this.url,this.headers,e,this.fetch)}}class ih extends th{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return N(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return N(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return N(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return N(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new ah(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class ah extends sh{constructor(e,t,r,n,i){super(e,t,i),this.vectorBucketName=r,this.indexName=n}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return N(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return N(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return N(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return N(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return N(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class oh extends Ju{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new Hu(this.url,this.headers,e,this.fetch)}get vectors(){return new nh(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Gu(this.url+"/iceberg",this.headers,this.fetch)}}const lh="2.76.1";let ks="";typeof Deno<"u"?ks="deno":typeof document<"u"?ks="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ks="react-native":ks="node";const ch={"X-Client-Info":`supabase-js-${ks}/${lh}`},dh={headers:ch},uh={schema:"public"},hh={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fh={},mh=s=>{let e;return s?e=s:typeof fetch>"u"?e=ao:e=fetch,(...t)=>e(...t)},ph=()=>typeof Headers>"u"?oo:Headers,gh=(s,e,t)=>{const r=mh(t),n=ph();return async(i,o)=>{var l;const c=(l=await e())!==null&&l!==void 0?l:s;let d=new n(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",s),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:d}))}};function yh(s){return s.endsWith("/")?s:s+"/"}function vh(s,e){var t,r;const{db:n,auth:i,realtime:o,global:l}=s,{db:c,auth:d,realtime:u,global:f}=e,g={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return s.accessToken?g.accessToken=s.accessToken:delete g.accessToken,g}function bh(s){const e=s==null?void 0:s.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(yh(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Eo="2.76.1",es=30*1e3,yn=3,Br=yn*es,wh="http://localhost:9999",xh="supabase.auth.token",_h={"X-Client-Info":`gotrue-js/${Eo}`},vn="X-Supabase-Api-Version",No={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},jh=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Sh=10*60*1e3;class Us extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function C(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class kh extends Us{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function Eh(s){return C(s)&&s.name==="AuthApiError"}class Nt extends Us{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class vt extends Us{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class st extends vt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Nh(s){return C(s)&&s.name==="AuthSessionMissingError"}class Gt extends vt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ar extends vt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class or extends vt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ch(s){return C(s)&&s.name==="AuthImplicitGrantRedirectError"}class Ui extends vt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bn extends vt{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Mr(s){return C(s)&&s.name==="AuthRetryableFetchError"}class Di extends vt{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class wn extends vt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const pr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Fi=` 	
\r=`.split(""),Th=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<Fi.length;e+=1)s[Fi[e].charCodeAt(0)]=-2;for(let e=0;e<pr.length;e+=1)s[pr[e].charCodeAt(0)]=e;return s})();function Bi(s,e,t){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(pr[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(pr[r]),e.queuedBits-=6}}function Co(s,e,t){const r=Th[s];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Mi(s){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{Rh(o,r,t)};for(let o=0;o<s.length;o+=1)Co(s.charCodeAt(o),n,i);return e.join("")}function Oh(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function Ph(s,e){for(let t=0;t<s.length;t+=1){let r=s.charCodeAt(t);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(s.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}Oh(r,e)}}function Rh(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let r=1;r<6;r+=1)if(!(s>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function ss(s){const e=[],t={queue:0,queuedBits:0},r=n=>{e.push(n)};for(let n=0;n<s.length;n+=1)Co(s.charCodeAt(n),t,r);return new Uint8Array(e)}function Ah(s){const e=[];return Ph(s,t=>e.push(t)),new Uint8Array(e)}function Ct(s){const e=[],t={queue:0,queuedBits:0},r=n=>{e.push(n)};return s.forEach(n=>Bi(n,t,r)),Bi(null,t,r),e.join("")}function Ih(s){return Math.round(Date.now()/1e3)+s}function $h(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const _e=()=>typeof window<"u"&&typeof document<"u",_t={tested:!1,writable:!1},To=()=>{if(!_e())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_t.tested)return _t.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),_t.tested=!0,_t.writable=!0}catch{_t.tested=!0,_t.writable=!1}return _t.writable};function Lh(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((r,n)=>{e[n]=r}),e}const Oo=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>ys(async()=>{const{default:r}=await Promise.resolve().then(()=>Kt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Uh=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",ts=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},jt=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},et=async(s,e)=>{await s.removeItem(e)};class jr{constructor(){this.promise=new jr.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}jr.promiseConstructor=Promise;function qr(s){const e=s.split(".");if(e.length!==3)throw new wn("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!jh.test(e[r]))throw new wn("JWT not in base64url format");return{header:JSON.parse(Mi(e[0])),payload:JSON.parse(Mi(e[1])),signature:ss(e[2]),raw:{header:e[0],payload:e[1]}}}async function Dh(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function Fh(s,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await s(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function Bh(s){return("0"+s.toString(16)).substr(-2)}function Mh(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,Bh).join("")}async function qh(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function Kh(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await qh(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qt(s,e,t=!1){const r=Mh();let n=r;t&&(n+="/PASSWORD_RECOVERY"),await ts(s,`${e}-code-verifier`,n);const i=await Kh(r);return[i,r===i?"plain":"s256"]}const zh=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Vh(s){const e=s.headers.get(vn);if(!e||!e.match(zh))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Wh(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function Hh(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Jh=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yt(s){if(!Jh.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Kr(){const s={};return new Proxy(s,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function qi(s){return JSON.parse(JSON.stringify(s))}const St=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Gh=[502,503,504];async function Ki(s){var e;if(!Uh(s))throw new bn(St(s),0);if(Gh.includes(s.status))throw new bn(St(s),s.status);let t;try{t=await s.json()}catch(i){throw new Nt(St(i),i)}let r;const n=Vh(s);if(n&&n.getTime()>=No["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Di(St(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new st}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Di(St(t),s.status,t.weak_password.reasons);throw new kh(St(t),s.status||500,r)}const Qh=(s,e,t,r)=>{const n={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),t))};async function P(s,e,t,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[vn]||(i[vn]=No["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Yh(s,e,t+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Yh(s,e,t,r,n,i){const o=Qh(e,r,n,i);let l;try{l=await s(t,Object.assign({},o))}catch(c){throw console.error(c),new bn(St(c),0)}if(l.ok||await Ki(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Ki(c)}}function Fe(s){var e;let t=null;ef(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=Ih(s.expires_in)));const r=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:r},error:null}}function zi(s){const e=Fe(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=s.weak_password),e}function rt(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function Xh(s){return{data:s,error:null}}function Zh(s){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:n,verification_type:i}=s,o=br(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:r,redirect_to:n,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Vi(s){return s}function ef(s){return s.access_token&&s.refresh_token&&s.expires_in}const zr=["global","local","others"];class tf{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Oo(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=zr[0]){if(zr.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${zr.join(", ")}`);try{return await P(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(C(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await P(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:rt})}catch(r){if(C(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=br(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await P(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Zh,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(C(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await P(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:rt})}catch(t){if(C(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await P(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Vi});if(u.error)throw u.error;const f=await u.json(),g=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(b=>{const m=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(b.split(";")[1].split("=")[1]);d[`${p}Page`]=m}),d.total=parseInt(g)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(C(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Yt(e);try{return await P(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:rt})}catch(t){if(C(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Yt(e);try{return await P(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:rt})}catch(r){if(C(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Yt(e);try{return await P(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:rt})}catch(r){if(C(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Yt(e.userId);try{const{data:t,error:r}=await P(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:r}}catch(t){if(C(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Yt(e.userId),Yt(e.id);try{return{data:await P(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,n,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await P(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Vi});if(u.error)throw u.error;const f=await u.json(),g=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(b=>{const m=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(b.split(";")[1].split("=")[1]);d[`${p}Page`]=m}),d.total=parseInt(g)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(C(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await P(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await P(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await P(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await P(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(C(t))return{data:null,error:t};throw t}}}function Wi(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}const Xt={debug:!!(globalThis&&To()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Po extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class sf extends Po{}async function rf(s,e,t){Xt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Xt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Xt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,n.name);try{return await t()}finally{Xt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,n.name)}}else{if(e===0)throw Xt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new sf(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Xt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function nf(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ro(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function af(s){return parseInt(s,16)}function of(s){const e=new TextEncoder().encode(s);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function lf(s){var e;const{chainId:t,domain:r,expirationTime:n,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:d,scheme:u,uri:f,version:g}=s;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(g!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(!((e=s.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const h=Ro(s.address),b=u?`${u}://${r}`:r,m=s.statement?`${s.statement}
`:"",p=`${b} wants you to sign in with your Ethereum account:
${h}

${m}`;let x=`URI: ${f}
Version: ${g}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(n&&(x+=`
Expiration Time: ${n.toISOString()}`),l&&(x+=`
Not Before: ${l.toISOString()}`),c&&(x+=`
Request ID: ${c}`),d){let _=`
Resources:`;for(const w of d){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);_+=`
- ${w}`}x+=_}return`${p}
${x}`}class re extends Error{constructor({message:e,code:t,cause:r,name:n}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=n??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=t}}class gr extends re{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function cf({error:s,options:e}){var t,r,n;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(e.signal instanceof AbortSignal)return new re({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((t=i.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new re({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new re({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new re({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new re({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new re({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new re({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new re({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const o=window.location.hostname;if(Ao(o)){if(i.rp.id!==o)return new re({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new re({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new re({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function df({error:s,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(e.signal instanceof AbortSignal)return new re({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new re({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const r=window.location.hostname;if(Ao(r)){if(t.rpId!==r)return new re({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new re({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class uf{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const hf=new uf;function ff(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:e,user:t,excludeCredentials:r}=s,n=br(s,["challenge","user","excludeCredentials"]),i=ss(e).buffer,o=Object.assign(Object.assign({},t),{id:ss(t.id).buffer}),l=Object.assign(Object.assign({},n),{challenge:i,user:o});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const d=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:ss(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function mf(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:e,allowCredentials:t}=s,r=br(s,["challenge","allowCredentials"]),n=ss(e).buffer,i=Object.assign(Object.assign({},r),{challenge:n});if(t&&t.length>0){i.allowCredentials=new Array(t.length);for(let o=0;o<t.length;o++){const l=t[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:ss(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function pf(s){var e;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const t=s;return{id:s.id,rawId:s.id,response:{attestationObject:Ct(new Uint8Array(s.response.attestationObject)),clientDataJSON:Ct(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function gf(s){var e;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const t=s,r=s.getClientExtensionResults(),n=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:Ct(new Uint8Array(n.authenticatorData)),clientDataJSON:Ct(new Uint8Array(n.clientDataJSON)),signature:Ct(new Uint8Array(n.signature)),userHandle:n.userHandle?Ct(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Ao(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function Hi(){var s,e;return!!(_e()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function yf(s){try{const e=await navigator.credentials.create(s);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new gr("Browser returned unexpected credential type",e)}:{data:null,error:new gr("Empty credential response",e)}}catch(e){return{data:null,error:cf({error:e,options:s})}}}async function vf(s){try{const e=await navigator.credentials.get(s);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new gr("Browser returned unexpected credential type",e)}:{data:null,error:new gr("Empty credential response",e)}}catch(e){return{data:null,error:df({error:e,options:s})}}}const bf={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},wf={userVerification:"preferred",hints:["security-key"]};function yr(...s){const e=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),t=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),r={};for(const n of s)if(n)for(const i in n){const o=n[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(t(o))r[i]=o;else if(e(o)){const l=r[i];e(l)?r[i]=yr(l,o):r[i]=yr(o)}else r[i]=o}return r}function xf(s,e){return yr(bf,s,e||{})}function _f(s,e){return yr(wf,s,e||{})}class jf{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:n},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!o)return{data:null,error:l};const c=n??hf.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=xf(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:u,error:f}=await yf({publicKey:d,signal:c});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:f}}case"request":{const d=_f(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:u,error:f}=await vf(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:c}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:f}}}}catch(o){return C(o)?{data:null,error:o}:{data:null,error:new Nt("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:n}},i){if(!t)return{data:null,error:new Us("rpId is required for WebAuthn authentication")};try{if(!Hi())return{data:null,error:new Nt("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:n},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:c.type,rpId:t,rpOrigins:r,credential_response:c.credential_response}})}catch(o){return C(o)?{data:null,error:o}:{data:null,error:new Nt("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:n},i){if(!t)return{data:null,error:new Us("rpId is required for WebAuthn registration")};try{if(!Hi())return{data:null,error:new Nt("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var f;return(f=u.data)===null||f===void 0?void 0:f.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===e&&g.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:n},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:t,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(o){return C(o)?{data:null,error:o}:{data:null,error:new Nt("Unexpected error in register",o)}}}}nf();const Sf={url:wh,storageKey:xh,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_h,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ji(s,e,t){return await t()}const Zt={};class Ds{get jwks(){var e,t;return(t=(e=Zt[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Zt[this.storageKey]=Object.assign(Object.assign({},Zt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Zt[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Zt[this.storageKey]=Object.assign(Object.assign({},Zt[this.storageKey]),{cachedAt:e})}constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ds.nextInstanceID,Ds.nextInstanceID+=1,this.instanceID>0&&_e()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Sf),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new tf({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Oo(n.fetch),this.lock=n.lock||Ji,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:_e()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=rf:this.lock=Ji,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new jf(this)},this.persistSession?(n.storage?this.storage=n.storage:To()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Wi(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=Wi(this.memoryStorage)),_e()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Eo}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Lh(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),_e()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Ch(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return C(t)?{error:t}:{error:new Nt("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Fe}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(C(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,n;try{let i;if("email"in e){const{email:u,password:f,options:g}=e;let h=null,b=null;this.flowType==="pkce"&&([h,b]=await Qt(this.storage,this.storageKey)),i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:u,password:f,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:h,code_challenge_method:b},xform:Fe})}else if("phone"in e){const{phone:u,password:f,options:g}=e;i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(n=g==null?void 0:g.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Fe})}else throw new ar("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(C(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:l}=e;t=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:zi})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:zi})}else throw new ar("You must provide either an email or phone number and a password");const{data:r,error:n}=t;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Gt}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,n,i,o,l,c,d,u,f,g;let h,b;if("message"in e)h=e.message,b=e.signature;else{const{chain:m,wallet:p,statement:x,options:_}=e;let w;if(_e())if(typeof p=="object")w=p;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")w=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=p}const S=new URL((t=_==null?void 0:_.url)!==null&&t!==void 0?t:window.location.href),T=await w.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=Ro(T[0]);let $=(r=_==null?void 0:_.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!$){const I=await w.request({method:"eth_chainId"});$=af(I)}const L={domain:S.host,address:E,statement:x,uri:S.href,version:"1",chainId:$,nonce:(n=_==null?void 0:_.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(o=(i=_==null?void 0:_.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=_==null?void 0:_.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=_==null?void 0:_.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=_==null?void 0:_.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(u=_==null?void 0:_.signInWithEthereum)===null||u===void 0?void 0:u.resources};h=lf(L),b=await w.request({method:"personal_sign",params:[of(h),E]})}try{const{data:m,error:p}=await P(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:b},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Fe});if(p)throw p;return!m||!m.session||!m.user?{data:{user:null,session:null},error:new Gt}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:Object.assign({},m),error:p})}catch(m){if(C(m))return{data:{user:null,session:null},error:m};throw m}}async signInWithSolana(e){var t,r,n,i,o,l,c,d,u,f,g,h;let b,m;if("message"in e)b=e.message,m=e.signature;else{const{chain:p,wallet:x,statement:_,options:w}=e;let S;if(_e())if(typeof x=="object")S=x;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))S=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=x}const T=new URL((t=w==null?void 0:w.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in S&&S.signIn){const E=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),_?{statement:_}:null));let $;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")$=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)$=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)b=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),m=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${T.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(n=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((d=w==null?void 0:w.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const E=await S.signMessage(new TextEncoder().encode(b),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=E}}try{const{data:p,error:x}=await P(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Ct(m)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Fe});if(x)throw x;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new Gt}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:x})}catch(p){if(C(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(e){const t=await jt(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(t??"").split("/");try{const{data:i,error:o}=await P(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Fe});if(await et(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Gt}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(C(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:i,nonce:o}=e,l=await P(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Fe}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Gt}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,n,i,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Qt(this.storage,this.storageKey));const{error:f}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new ar("You must provide either an email or phone number.")}catch(l){if(C(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,r;try{let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await P(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Fe});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(C(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,r,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Qt(this.storage,this.storageKey)),await P(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Xh})}catch(i){if(C(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new st;const{error:n}=await P(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(C(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:o}=await P(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:o,error:l}=await P(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new ar("You must provide either an email or phone number and a type")}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await jt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Br:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await jt(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Kr()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:rt}):await this._useSession(async t=>{var r,n,i;const{data:o,error:l}=t;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new st}:await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:rt})})}catch(t){if(C(t))return Nh(t)&&(await this._removeSession(),await et(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new st;const o=n.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Qt(this.storage,this.storageKey));const{data:d,error:u}=await P(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:rt});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(C(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new st;const t=Date.now()/1e3;let r=t,n=!0,i=null;const{payload:o}=qr(e.access_token);if(o.exp&&(r=o.exp,n=r<=t),n){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(C(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new st;const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(C(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!_e())throw new or("No browser detected.");if(e.error||e.error_description||e.error_code)throw new or(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Ui("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new or("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ui("No code detected.");const{data:_,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!o||!d)throw new or("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(l);let g=u+f;c&&(g=parseInt(c));const h=g-u;h*1e3<=es&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const b=g-f;u-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,g,u):u-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,g,u);const{data:m,error:p}=await this._getUser(i);if(p)throw p;const x={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:f,expires_at:g,refresh_token:o,token_type:d,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(r){if(C(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await jt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:n,error:i}=t;if(i)return{error:i};const o=(r=n.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Eh(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await et(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=$h(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:i},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await Qt(this.storage,this.storageKey,!0));try{return await P(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(C(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:n}=await this._useSession(async i=>{var o,l,c,d,u;const{data:f,error:g}=i;if(g)throw g;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await P(this.fetch,"GET",h,{headers:this.headers,jwt:(u=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return _e()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(C(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:n,data:{session:i}}=t;if(n)throw n;const{options:o,provider:l,token:c,access_token:d,nonce:u}=e,f=await P(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:d,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Fe}),{data:g,error:h}=f;return h?{data:{user:null,session:null},error:h}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Gt}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("USER_UPDATED",g.session)),{data:g,error:h})}catch(n){if(C(n))return{data:{user:null,session:null},error:n};throw n}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:i,error:o}=t;if(o)throw o;return await P(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await Fh(async n=>(n>0&&await Dh(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await P(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Fe})),(n,i)=>{const o=200*Math.pow(2,n);return i&&Mr(i)&&Date.now()+o-r<es})}catch(r){if(this._debug(t,"error",r),C(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),_e()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await jt(this.storage,this.storageKey);if(n&&this.userStorage){let o=await jt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:n.user},await ts(this.userStorage,this.storageKey+"-user",o)),n.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Kr()}else if(n&&!n.user&&!n.user){const o=await jt(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(n.user=o.user,await et(this.storage,this.storageKey+"-user"),await ts(this.storage,this.storageKey,n)):n.user=Kr()}if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Br;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Br}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),Mr(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(n.access_token);!l&&(o!=null&&o.user)?(n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new st;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new jr;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new st;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),C(i)){const o={data:null,error:i};return Mr(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await ts(this.userStorage,this.storageKey+"-user",{user:t.user});const n=Object.assign({},t);delete n.user;const i=qi(n);await ts(this.storage,this.storageKey,i)}else{const n=qi(t);await ts(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await et(this.storage,this.storageKey),await et(this.storage,this.storageKey+"-code-verifier"),await et(this.storage,this.storageKey+"-user"),this.userStorage&&await et(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&_e()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),es);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/es);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${es}ms, refresh threshold is ${yn} ticks`),n<=yn&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Po)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_e()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Qt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:i}=t;return i?{data:null,error:i}:await P(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:i,error:o}=t;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:d}=await P(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&c.type==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(C(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:i}=t;if(i)return{data:null,error:i};const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?pf(e.webauthn.credential_response):gf(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await P(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(t){if(C(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:i}=t;if(i)return{data:null,error:i};const o=await P(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:ff(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:mf(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(C(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])n.all.push(i),i.status==="verified"&&n[i.factor_type].push(i);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=qr(n.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(l=>l.kid===e);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+Sh>n)return r;const{data:i,error:o}=await P(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,r=i.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:h,error:b}=await this.getSession();if(b||!h.session)return{data:null,error:b};r=h.session.access_token}const{header:n,payload:i,signature:o,raw:{header:l,payload:c}}=qr(r);t!=null&&t.allowExpired||Wh(i.exp);const d=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!d){const{error:h}=await this.getUser(r);if(h)throw h;return{data:{claims:i,header:n,signature:o},error:null}}const u=Hh(n.alg),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,Ah(`${l}.${c}`)))throw new wn("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(r){if(C(r))return{data:null,error:r};throw r}}}Ds.nextInstanceID=0;const kf=Ds;class Ef extends kf{constructor(e){super(e)}}class Nf{constructor(e,t,r){var n,i,o;this.supabaseUrl=e,this.supabaseKey=t;const l=bh(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:uh,realtime:fh,auth:Object.assign(Object.assign({},hh),{storageKey:c}),global:dh},u=vh(r??{},d);this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(f,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=gh(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new wu(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new oh(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new hu(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:o,flowType:l,lock:c,debug:d},u,f){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ef({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),u),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,flowType:l,lock:c,debug:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(h=>h.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Uu(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Cf=(s,e,t)=>new Nf(s,e,t);function Tf(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const e=s.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Tf()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Of="https://jypxysrmjvokrnvwjjtw.supabase.co",Pf="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp5cHh5c3JtanZva3JudndqanR3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEyNzcxNDYsImV4cCI6MjA3Njg1MzE0Nn0.KcGdniIuXyqaUru5RTrOjIH9p-7w-aWBSh83sKF-u34",le=Cf(Of,Pf,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),ws=()=>{const[s,e]=v.useState(null),[t,r]=v.useState(null),[n,i]=v.useState(!0),o=Ae();return v.useEffect(()=>{const{data:{subscription:l}}=le.auth.onAuthStateChange((c,d)=>{r(d),e((d==null?void 0:d.user)??null),i(!1),d&&(window.location.pathname==="/login"||window.location.pathname==="/register")&&o("/")});return le.auth.getSession().then(({data:{session:c}})=>{r(c),e((c==null?void 0:c.user)??null),i(!1)}),()=>l.unsubscribe()},[o]),{user:s,session:t,loading:n}},Rf=Sa({fullName:kt().trim().min(2,"Name must be at least 2 characters"),email:kt().trim().email("Invalid email address"),password:kt().min(6,"Password must be at least 6 characters"),confirmPassword:kt(),role:yl(["job_seeker","employer"]),companyName:kt().optional()}).refine(s=>s.password===s.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),Af=Sa({email:kt().trim().email("Invalid email address"),password:kt().min(1,"Password is required")}),If=async s=>{const{error:e}=await le.auth.signUp({email:s.email,password:s.password,options:{emailRedirectTo:`${window.location.origin}/`,data:{full_name:s.fullName,role:s.role,company_name:s.companyName}}});return{error:e}},$f=async s=>{const{error:e}=await le.auth.signInWithPassword({email:s.email,password:s.password});return{error:e}},Lf=async()=>{const{error:s}=await le.auth.signOut();return{error:s}},Ce=()=>{const[s,e]=v.useState(!1),{user:t,loading:r}=ws(),n=Ae(),{toast:i}=gt(),o=async()=>{const{error:l}=await Lf();l?i({variant:"destructive",title:"Logout Failed",description:l.message}):(i({title:"Logged out successfully"}),n("/"))};return a.jsx("nav",{className:"sticky top-0 z-50 bg-background/95 backdrop-blur-md border-b border-border shadow-soft",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs(M,{to:"/",className:"flex items-center gap-2 text-xl font-bold",children:[a.jsx("div",{className:"bg-gradient-hero p-2 rounded-lg",children:a.jsx(Bt,{className:"h-6 w-6 text-primary-foreground"})}),a.jsx("span",{className:"bg-gradient-to-r from-primary to-primary-hover bg-clip-text text-transparent",children:"KaziConnect"})]}),a.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[a.jsx(M,{to:"/jobs",className:"text-foreground hover:text-primary transition-smooth",children:"Find Jobs"}),a.jsx(M,{to:"/employers",className:"text-foreground hover:text-primary transition-smooth",children:"For Employers"}),a.jsx(M,{to:"/about",className:"text-foreground hover:text-primary transition-smooth",children:"About"})]}),a.jsx("div",{className:"hidden md:flex items-center gap-4",children:t?a.jsxs(a.Fragment,{children:[a.jsx(M,{to:"/profile",children:a.jsx(A,{variant:"ghost",children:"Profile"})}),a.jsx(M,{to:"/post-job",children:a.jsx(A,{variant:"outline",children:"Post Job"})}),a.jsxs(A,{variant:"ghost",onClick:o,children:[a.jsx(ei,{className:"h-4 w-4 mr-2"}),"Logout"]})]}):a.jsxs(a.Fragment,{children:[a.jsx(M,{to:"/login",children:a.jsx(A,{variant:"ghost",children:"Login"})}),a.jsx(M,{to:"/register",children:a.jsx(A,{className:"bg-gradient-hero hover:opacity-90 transition-smooth",children:"Sign Up"})})]})}),a.jsx("button",{className:"md:hidden p-2",onClick:()=>e(!s),children:s?a.jsx(Ra,{}):a.jsx($l,{})})]}),s&&a.jsxs("div",{className:"md:hidden py-4 space-y-4 border-t border-border",children:[a.jsx(M,{to:"/jobs",className:"block py-2 text-foreground hover:text-primary transition-smooth",onClick:()=>e(!1),children:"Find Jobs"}),a.jsx(M,{to:"/employers",className:"block py-2 text-foreground hover:text-primary transition-smooth",onClick:()=>e(!1),children:"For Employers"}),a.jsx(M,{to:"/about",className:"block py-2 text-foreground hover:text-primary transition-smooth",onClick:()=>e(!1),children:"About"}),a.jsx("div",{className:"flex flex-col gap-2 pt-4",children:t?a.jsxs(a.Fragment,{children:[a.jsx(M,{to:"/profile",onClick:()=>e(!1),children:a.jsx(A,{variant:"ghost",className:"w-full",children:"Profile"})}),a.jsx(M,{to:"/post-job",onClick:()=>e(!1),children:a.jsx(A,{variant:"outline",className:"w-full",children:"Post Job"})}),a.jsxs(A,{variant:"ghost",className:"w-full justify-start",onClick:o,children:[a.jsx(ei,{className:"h-4 w-4 mr-2"}),"Logout"]})]}):a.jsxs(a.Fragment,{children:[a.jsx(M,{to:"/login",onClick:()=>e(!1),children:a.jsx(A,{variant:"ghost",className:"w-full",children:"Login"})}),a.jsx(M,{to:"/register",onClick:()=>e(!1),children:a.jsx(A,{className:"w-full bg-gradient-hero hover:opacity-90 transition-smooth",children:"Sign Up"})})]})})]})]})})},Te=()=>a.jsx("footer",{className:"bg-secondary text-secondary-foreground",children:a.jsxs("div",{className:"container mx-auto px-4 py-12",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"bg-gradient-hero p-2 rounded-lg",children:a.jsx(Bt,{className:"h-5 w-5 text-primary-foreground"})}),a.jsx("span",{className:"text-xl font-bold text-primary-foreground",children:"KaziConnect"})]}),a.jsx("p",{className:"text-secondary-foreground/80 text-sm",children:"Kenya's premier job portal connecting talented professionals with top employers."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-4 text-primary-foreground",children:"For Job Seekers"}),a.jsxs("ul",{className:"space-y-2 text-sm",children:[a.jsx("li",{children:a.jsx(M,{to:"/jobs",className:"hover:text-primary-foreground transition-smooth",children:"Browse Jobs"})}),a.jsx("li",{children:a.jsx(M,{to:"/register",className:"hover:text-primary-foreground transition-smooth",children:"Create Profile"})}),a.jsx("li",{children:a.jsx(M,{to:"/career-advice",className:"hover:text-primary-foreground transition-smooth",children:"Career Advice"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-4 text-primary-foreground",children:"For Employers"}),a.jsxs("ul",{className:"space-y-2 text-sm",children:[a.jsx("li",{children:a.jsx(M,{to:"/post-job",className:"hover:text-primary-foreground transition-smooth",children:"Post a Job"})}),a.jsx("li",{children:a.jsx(M,{to:"/pricing",className:"hover:text-primary-foreground transition-smooth",children:"Pricing"})}),a.jsx("li",{children:a.jsx(M,{to:"/employer-resources",className:"hover:text-primary-foreground transition-smooth",children:"Resources"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-4 text-primary-foreground",children:"Contact Us"}),a.jsxs("ul",{className:"space-y-2 text-sm",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Oa,{className:"h-4 w-4"}),a.jsx("span",{children:"info@kaziconnect.co.ke"})]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Ul,{className:"h-4 w-4"}),a.jsx("span",{children:"+254 700 000 000"})]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(xr,{className:"h-4 w-4"}),a.jsx("span",{children:"Nairobi, Kenya"})]})]})]})]}),a.jsx("div",{className:"border-t border-secondary-foreground/20 mt-8 pt-8 text-center text-sm text-secondary-foreground/80",children:a.jsx("p",{children:" 2025 KaziConnect Kenya. All rights reserved."})})]})}),W=v.forwardRef(({className:s,type:e,...t},r)=>a.jsx("input",{type:e,className:q("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base text-foreground ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...t}));W.displayName="Input";const Io=({onSearch:s})=>{const[e,t]=v.useState(""),[r,n]=v.useState(""),i=()=>{s==null||s(e,r)};return a.jsx("div",{className:"bg-card rounded-xl shadow-card p-4 max-w-4xl mx-auto",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(Dl,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),a.jsx(W,{placeholder:"Job title, keywords, or company",className:"pl-10 h-12",value:e,onChange:o=>t(o.target.value),onKeyPress:o=>o.key==="Enter"&&i()})]}),a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(xr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),a.jsx(W,{placeholder:"Nairobi, Mombasa, Remote...",className:"pl-10 h-12",value:r,onChange:o=>n(o.target.value),onKeyPress:o=>o.key==="Enter"&&i()})]}),a.jsx(A,{className:"h-12 px-8 bg-gradient-hero hover:opacity-90 transition-smooth",onClick:i,children:"Search Jobs"})]})})},ue=v.forwardRef(({className:s,...e},t)=>a.jsx("div",{ref:t,className:q("rounded-lg border bg-card text-card-foreground shadow-sm",s),...e}));ue.displayName="Card";const Ee=v.forwardRef(({className:s,...e},t)=>a.jsx("div",{ref:t,className:q("flex flex-col space-y-1.5 p-6",s),...e}));Ee.displayName="CardHeader";const Ne=v.forwardRef(({className:s,...e},t)=>a.jsx("h3",{ref:t,className:q("text-2xl font-semibold leading-none tracking-tight",s),...e}));Ne.displayName="CardTitle";const Sr=v.forwardRef(({className:s,...e},t)=>a.jsx("p",{ref:t,className:q("text-sm text-muted-foreground",s),...e}));Sr.displayName="CardDescription";const me=v.forwardRef(({className:s,...e},t)=>a.jsx("div",{ref:t,className:q("p-6 pt-0",s),...e}));me.displayName="CardContent";const Uf=v.forwardRef(({className:s,...e},t)=>a.jsx("div",{ref:t,className:q("flex items-center p-6 pt-0",s),...e}));Uf.displayName="CardFooter";const Df=wr("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ft({className:s,variant:e,...t}){return a.jsx("div",{className:q(Df({variant:e}),s),...t})}const $o=({id:s,title:e,company:t,location:r,type:n,salary:i,description:o,postedAt:l,logo:c})=>a.jsxs(ue,{className:"hover:shadow-hover transition-smooth cursor-pointer group",children:[a.jsx(Ee,{children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex gap-4 flex-1",children:[c&&a.jsx("div",{className:"w-12 h-12 rounded-lg bg-muted flex items-center justify-center flex-shrink-0",children:a.jsx("img",{src:c,alt:t,className:"w-full h-full object-cover rounded-lg"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx(Ne,{className:"text-xl group-hover:text-primary transition-smooth",children:e}),a.jsx(Sr,{className:"text-base font-medium mt-1",children:t})]})]}),a.jsx(A,{variant:"ghost",size:"icon",className:"flex-shrink-0",children:a.jsx(Cl,{className:"h-5 w-5"})})]})}),a.jsxs(me,{children:[a.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[a.jsxs(ft,{variant:"secondary",className:"flex items-center gap-1",children:[a.jsx(xr,{className:"h-3 w-3"}),r]}),a.jsxs(ft,{variant:"secondary",className:"flex items-center gap-1",children:[a.jsx(Bt,{className:"h-3 w-3"}),n]}),i&&a.jsx(ft,{variant:"secondary",className:"bg-primary/10 text-primary",children:i}),a.jsxs(ft,{variant:"secondary",className:"flex items-center gap-1",children:[a.jsx(Rl,{className:"h-3 w-3"}),l]})]}),a.jsx("p",{className:"text-muted-foreground mb-4 line-clamp-2",children:o}),a.jsx(M,{to:`/jobs/${s}`,children:a.jsx(A,{className:"w-full bg-gradient-hero hover:opacity-90 transition-smooth",children:"View Details"})})]})]}),Ff="/Kazi-Connect/assets/hero-image-COpQU9I-.jpg",Lo=({keyword:s="",location:e="",page:t=1,pageSize:r=10}={})=>Ga({queryKey:["jobs",s,e,t],queryFn:async()=>{let n=le.from("jobs").select("*",{count:"exact"}).eq("is_active",!0).order("created_at",{ascending:!1});s&&(n=n.or(`title.ilike.%${s}%,description.ilike.%${s}%,company.ilike.%${s}%`)),e&&(n=n.ilike("location",`%${e}%`));const i=(t-1)*r,o=i+r-1;n=n.range(i,o);const{data:l,error:c,count:d}=await n;if(c)throw c;return{jobs:l||[],totalCount:d||0,totalPages:Math.ceil((d||0)/r)}}}),Bf=()=>{v.useState(""),v.useState("");const s=Ae(),{user:e}=ws(),{data:t,isLoading:r}=Lo({pageSize:4}),n=(c,d)=>{const u=new URLSearchParams;c&&u.set("keyword",c),d&&u.set("location",d),s(`/jobs?${u.toString()}`)},i=(c,d)=>{if(!(!c&&!d))return c&&d?`KES ${c.toLocaleString()} - ${d.toLocaleString()}`:c?`From KES ${c.toLocaleString()}`:`Up to KES ${d==null?void 0:d.toLocaleString()}`},o=c=>{const d=new Date(c),f=Math.abs(new Date().getTime()-d.getTime()),g=Math.ceil(f/(1e3*60*60*24));return g===0?"Today":g===1?"Yesterday":g<7?`${g} days ago`:g<30?`${Math.floor(g/7)} weeks ago`:`${Math.floor(g/30)} months ago`},l=[{icon:Bt,label:"Active Jobs",value:"10,000+"},{icon:kn,label:"Job Seekers",value:"50,000+"},{icon:Tl,label:"Companies",value:"2,500+"},{icon:Sn,label:"Placements",value:"15,000+"}];return a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(Ce,{}),a.jsxs("section",{className:"relative bg-gradient-hero text-primary-foreground py-20 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-10",children:a.jsx("img",{src:Ff,alt:"Kenya professionals",className:"w-full h-full object-cover"})}),a.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[a.jsxs("div",{className:"max-w-3xl mx-auto text-center mb-12",children:[a.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6 animate-in fade-in slide-in-from-bottom-4 duration-1000",children:"Find Your Dream Job in Kenya"}),a.jsx("p",{className:"text-xl md:text-2xl mb-8 text-primary-foreground/90 animate-in fade-in slide-in-from-bottom-4 duration-1000 delay-150",children:"Connect with top employers across Kenya. Your next opportunity awaits."})]}),a.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-1000 delay-300",children:a.jsx(Io,{onSearch:n})})]})]}),a.jsx("section",{className:"py-12 bg-muted/30",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:l.map((c,d)=>a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-lg bg-primary/10 mb-4",children:a.jsx(c.icon,{className:"h-6 w-6 text-primary"})}),a.jsx("div",{className:"text-3xl font-bold text-foreground mb-1",children:c.value}),a.jsx("div",{className:"text-muted-foreground",children:c.label})]},d))})})}),a.jsx("section",{className:"py-16 bg-background",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Featured Opportunities"}),a.jsx("p",{className:"text-xl text-muted-foreground",children:"Discover exciting career opportunities from top Kenyan companies"})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-2 gap-6 mb-8",children:r?a.jsx("div",{className:"col-span-2 text-center py-12 text-muted-foreground",children:"Loading jobs..."}):t&&t.jobs.length>0?t.jobs.map(c=>a.jsx($o,{id:c.id,title:c.title,company:c.company,location:c.location,type:c.job_type,salary:i(c.salary_min,c.salary_max),description:c.description,postedAt:o(c.created_at),logo:c.image_url||void 0},c.id)):a.jsx("div",{className:"col-span-2 text-center py-12 text-muted-foreground",children:"No jobs available at the moment. Check back soon!"})}),a.jsx("div",{className:"text-center",children:a.jsx(A,{size:"lg",variant:"outline",className:"border-primary text-primary hover:bg-primary hover:text-primary-foreground",onClick:()=>s("/jobs"),children:"View All Jobs"})})]})}),a.jsx("section",{className:"py-16 bg-gradient-hero text-primary-foreground",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsxs("div",{className:"grid md:grid-cols-2 gap-12",children:[a.jsxs("div",{className:"text-center md:text-left",children:[a.jsx("h3",{className:"text-2xl font-bold mb-4",children:"For Job Seekers"}),a.jsxs("ul",{className:"space-y-3 mb-6",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx(je,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),a.jsx("span",{children:"Create your professional profile for free"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx(je,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),a.jsx("span",{children:"Apply to thousands of job opportunities"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx(je,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),a.jsx("span",{children:"Get job alerts matching your preferences"})]})]}),a.jsx(A,{size:"lg",variant:"secondary",className:"w-full md:w-auto",onClick:()=>s(e?"/profile":"/register"),children:"Create Your Profile"})]}),a.jsxs("div",{className:"text-center md:text-left",children:[a.jsx("h3",{className:"text-2xl font-bold mb-4",children:"For Employers"}),a.jsxs("ul",{className:"space-y-3 mb-6",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx(je,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),a.jsx("span",{children:"Post jobs for only $10"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx(je,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),a.jsx("span",{children:"Reach thousands of qualified candidates"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx(je,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),a.jsx("span",{children:"Easy M-Pesa payment integration"})]})]}),a.jsx(A,{size:"lg",variant:"secondary",className:"w-full md:w-auto",onClick:()=>s("/post-job"),children:"Post a Job"})]})]})})})}),a.jsx(Te,{})]})},dr=ll,ur=cl,Os=v.forwardRef(({className:s,children:e,...t},r)=>a.jsxs(ua,{ref:r,className:q("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...t,children:[e,a.jsx(rl,{asChild:!0,children:a.jsx(Ca,{className:"h-4 w-4 opacity-50"})})]}));Os.displayName=ua.displayName;const Uo=v.forwardRef(({className:s,...e},t)=>a.jsx(ha,{ref:t,className:q("flex cursor-default items-center justify-center py-1",s),...e,children:a.jsx(Ol,{className:"h-4 w-4"})}));Uo.displayName=ha.displayName;const Do=v.forwardRef(({className:s,...e},t)=>a.jsx(fa,{ref:t,className:q("flex cursor-default items-center justify-center py-1",s),...e,children:a.jsx(Ca,{className:"h-4 w-4"})}));Do.displayName=fa.displayName;const Ps=v.forwardRef(({className:s,children:e,position:t="popper",...r},n)=>a.jsx(nl,{children:a.jsxs(ma,{ref:n,className:q("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...r,children:[a.jsx(Uo,{}),a.jsx(il,{className:q("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(Do,{})]})}));Ps.displayName=ma.displayName;const Mf=v.forwardRef(({className:s,...e},t)=>a.jsx(pa,{ref:t,className:q("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...e}));Mf.displayName=pa.displayName;const ae=v.forwardRef(({className:s,children:e,...t},r)=>a.jsxs(ga,{ref:r,className:q("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",s),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(al,{children:a.jsx(Na,{className:"h-4 w-4"})})}),a.jsx(ol,{children:e})]}));ae.displayName=ga.displayName;const qf=v.forwardRef(({className:s,...e},t)=>a.jsx(ya,{ref:t,className:q("-mx-1 my-1 h-px bg-muted",s),...e}));qf.displayName=ya.displayName;const xn=v.forwardRef(({className:s,...e},t)=>a.jsx(va,{ref:t,className:q("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...e,children:a.jsx(dl,{className:q("flex items-center justify-center text-current"),children:a.jsx(Na,{className:"h-4 w-4"})})}));xn.displayName=va.displayName;const Kf=wr("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),B=v.forwardRef(({className:s,...e},t)=>a.jsx(ba,{ref:t,className:q(Kf(),s),...e}));B.displayName=ba.displayName;const zf=s=>[{title:"Frontend Developer",company:"Nairobi Tech Labs",company_email:"jobs@nairotechlabs.co.ke",company_phone:"+254712345678",location:"Nairobi",job_type:"Full-time",category:"Technology",salary_min:8e4,salary_max:15e4,description:"Build beautiful, responsive web interfaces using React and Tailwind. Collaborate with backend engineers and designers to deliver delightful user experiences.",requirements:"3+ years with React, TypeScript, Tailwind. Experience with REST APIs and state management.",employer_id:s,is_active:!0,payment_status:"completed",image_url:null},{title:"Operations Manager",company:"Mombasa Logistics Co.",company_email:"careers@mombasalogistics.co.ke",company_phone:"+254723456789",location:"Mombasa",job_type:"Full-time",category:"Operations",salary_min:1e5,salary_max:18e4,description:"Lead daily logistics operations, optimize processes, and manage a team to ensure timely deliveries across the coast region.",requirements:"5+ years in operations/logistics, strong leadership and communication skills.",employer_id:s,is_active:!0,payment_status:"completed",image_url:null},{title:"Customer Success Specialist",company:"Kisumu Cloud Services",company_email:"hr@kisumucloud.co.ke",company_phone:"+254734567890",location:"Kisumu (Hybrid)",job_type:"Contract",category:"Customer Support",salary_min:6e4,salary_max:9e4,description:"Support customers, onboard new clients, and ensure continued product adoption and satisfaction.",requirements:"Excellent communication, problem-solving mindset, experience with CRM tools.",employer_id:s,is_active:!0,payment_status:"completed",image_url:null}];function Vf(){const{toast:s}=gt(),[e,t]=v.useState(!1),r=async()=>{t(!0);try{const{data:{session:n}}=await le.auth.getSession();if(!(n!=null&&n.user)){s({variant:"destructive",title:"Login required",description:"Please log in to add sample jobs."}),t(!1);return}const i=zf(n.user.id),{error:o}=await le.from("jobs").insert(i);if(o)throw o;s({title:"Sample jobs added",description:"We added a few jobs to get you started."}),window.location.reload()}catch(n){s({variant:"destructive",title:"Error",description:n.message})}finally{t(!1)}};return a.jsxs(A,{onClick:r,disabled:e,variant:"outline",children:[e?a.jsx(Dt,{className:"h-4 w-4 mr-2 animate-spin"}):a.jsx(Ml,{className:"h-4 w-4 mr-2"}),"Add sample jobs"]})}const Wf=()=>{const[s,e]=v.useState(!0),[t,r]=An(),[n,i]=v.useState(1),[o,l]=v.useState(t.get("keyword")||""),[c,d]=v.useState(t.get("location")||""),{data:u,isLoading:f}=Lo({keyword:o,location:c,page:n,pageSize:6});v.useEffect(()=>{l(t.get("keyword")||""),d(t.get("location")||""),i(1)},[t]);const g=(m,p)=>{l(m),d(p),i(1);const x=new URLSearchParams;m&&x.set("keyword",m),p&&x.set("location",p),r(x)},h=(m,p)=>{if(!(!m&&!p))return m&&p?`KES ${m.toLocaleString()} - ${p.toLocaleString()}`:m?`From KES ${m.toLocaleString()}`:`Up to KES ${p==null?void 0:p.toLocaleString()}`},b=m=>{const p=new Date(m),_=Math.abs(new Date().getTime()-p.getTime()),w=Math.ceil(_/(1e3*60*60*24));return w===0?"Today":w===1?"Yesterday":w<7?`${w} days ago`:w<30?`${Math.floor(w/7)} weeks ago`:`${Math.floor(w/30)} months ago`};return a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(Ce,{}),a.jsx("section",{className:"bg-gradient-hero text-primary-foreground py-12",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-6 text-center",children:"Search Jobs"}),a.jsx(Io,{onSearch:g})]})}),a.jsx("section",{className:"py-8 flex-1 bg-muted/30",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"flex gap-8",children:[a.jsx("aside",{className:`${s?"block":"hidden"} md:block w-full md:w-64 flex-shrink-0`,children:a.jsxs("div",{className:"bg-card rounded-lg p-6 shadow-card sticky top-20",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),a.jsx(A,{variant:"ghost",size:"sm",children:"Clear All"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"font-medium mb-3",children:"Job Type"}),a.jsx("div",{className:"space-y-2",children:["Full-time","Part-time","Contract","Internship"].map(m=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(xn,{id:m}),a.jsx(B,{htmlFor:m,className:"text-sm cursor-pointer",children:m})]},m))})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"font-medium mb-3",children:"Location"}),a.jsx("div",{className:"space-y-2",children:["Nairobi","Mombasa","Kisumu","Nakuru","Remote"].map(m=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(xn,{id:m}),a.jsx(B,{htmlFor:m,className:"text-sm cursor-pointer",children:m})]},m))})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"font-medium mb-3",children:"Industry"}),a.jsxs(dr,{children:[a.jsx(Os,{children:a.jsx(ur,{placeholder:"All Industries"})}),a.jsxs(Ps,{children:[a.jsx(ae,{value:"tech",children:"Technology"}),a.jsx(ae,{value:"finance",children:"Finance"}),a.jsx(ae,{value:"healthcare",children:"Healthcare"}),a.jsx(ae,{value:"education",children:"Education"}),a.jsx(ae,{value:"hospitality",children:"Hospitality"})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"font-medium mb-3",children:"Salary Range"}),a.jsxs(dr,{children:[a.jsx(Os,{children:a.jsx(ur,{placeholder:"Any Salary"})}),a.jsxs(Ps,{children:[a.jsx(ae,{value:"0-50k",children:"Below KES 50,000"}),a.jsx(ae,{value:"50k-100k",children:"KES 50,000 - 100,000"}),a.jsx(ae,{value:"100k-200k",children:"KES 100,000 - 200,000"}),a.jsx(ae,{value:"200k+",children:"Above KES 200,000"})]})]})]})]})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("p",{className:"text-muted-foreground",children:["Showing ",a.jsx("span",{className:"font-semibold text-foreground",children:(u==null?void 0:u.jobs.length)||0})," of ",a.jsx("span",{className:"font-semibold text-foreground",children:(u==null?void 0:u.totalCount)||0})," jobs"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(A,{variant:"outline",size:"sm",className:"md:hidden",onClick:()=>e(!s),children:[a.jsx(Bl,{className:"h-4 w-4 mr-2"}),"Filters"]}),a.jsxs(dr,{defaultValue:"recent",children:[a.jsx(Os,{className:"w-[180px]",children:a.jsx(ur,{})}),a.jsxs(Ps,{children:[a.jsx(ae,{value:"recent",children:"Most Recent"}),a.jsx(ae,{value:"salary-high",children:"Highest Salary"}),a.jsx(ae,{value:"salary-low",children:"Lowest Salary"})]})]})]})]}),a.jsx("div",{className:"grid gap-6",children:f?a.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Loading jobs..."}):u&&u.jobs.length>0?u.jobs.map(m=>a.jsx($o,{id:m.id,title:m.title,company:m.company,location:m.location,type:m.job_type,salary:h(m.salary_min,m.salary_max),description:m.description,postedAt:b(m.created_at),logo:m.image_url||void 0},m.id)):a.jsxs("div",{className:"text-center py-12 text-muted-foreground space-y-4",children:[a.jsx("p",{children:"No jobs found matching your criteria."}),a.jsx("div",{children:a.jsx(Vf,{})})]})}),u&&u.totalPages>1&&a.jsx("div",{className:"flex justify-center mt-8",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(A,{variant:"outline",onClick:()=>i(m=>Math.max(1,m-1)),disabled:n===1,children:"Previous"}),Array.from({length:u.totalPages},(m,p)=>p+1).filter(m=>m===1||m===u.totalPages||Math.abs(m-n)<=1).map((m,p,x)=>a.jsxs(a.Fragment,{children:[p>0&&x[p-1]!==m-1&&a.jsx("span",{className:"px-2 py-2",children:"..."},`ellipsis-${m}`),a.jsx(A,{variant:m===n?"default":"outline",onClick:()=>i(m),className:m===n?"bg-primary text-primary-foreground":"",children:m},m)]})),a.jsx(A,{variant:"outline",onClick:()=>i(m=>Math.min(u.totalPages,m+1)),disabled:n===u.totalPages,children:"Next"})]})})]})]})})}),a.jsx(Te,{})]})},Hf=()=>{const{id:s}=$d(),e=Ae(),{data:t,isLoading:r}=Ga({queryKey:["job",s],queryFn:async()=>{const{data:l,error:c}=await le.from("jobs").select("*").eq("id",s).eq("is_active",!0).single();if(c)throw c;return l}}),n=(l,c)=>!l&&!c?null:l&&c?`KES ${l.toLocaleString()} - ${c.toLocaleString()}`:l?`From KES ${l.toLocaleString()}`:`Up to KES ${c==null?void 0:c.toLocaleString()}`,i=l=>new Date(l).toLocaleDateString("en-KE",{year:"numeric",month:"long",day:"numeric"});if(r)return a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(Ce,{}),a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsx(Dt,{className:"h-8 w-8 animate-spin text-primary"})}),a.jsx(Te,{})]});if(!t)return a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(Ce,{}),a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Job Not Found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"This job posting may have been removed or is no longer available."}),a.jsx(A,{onClick:()=>e("/jobs"),children:"Back to Jobs"})]})}),a.jsx(Te,{})]});const o=n(t.salary_min,t.salary_max);return a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(Ce,{}),a.jsxs("main",{className:"flex-1 container mx-auto px-4 py-8",children:[a.jsxs(A,{variant:"ghost",onClick:()=>e("/jobs"),className:"mb-6",children:[a.jsx(El,{className:"h-4 w-4 mr-2"}),"Back to Jobs"]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"md:col-span-2 space-y-6",children:[a.jsx(ue,{children:a.jsxs(Ee,{children:[a.jsxs("div",{className:"flex items-start gap-4",children:[t.image_url&&a.jsx("div",{className:"w-16 h-16 rounded-lg bg-muted flex items-center justify-center flex-shrink-0",children:a.jsx("img",{src:t.image_url,alt:t.company,className:"w-full h-full object-cover rounded-lg"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx(Ne,{className:"text-3xl mb-2",children:t.title}),a.jsx("p",{className:"text-xl text-muted-foreground font-medium",children:t.company})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[a.jsxs(ft,{variant:"secondary",className:"flex items-center gap-1",children:[a.jsx(xr,{className:"h-3 w-3"}),t.location]}),a.jsxs(ft,{variant:"secondary",className:"flex items-center gap-1",children:[a.jsx(Bt,{className:"h-3 w-3"}),t.job_type]}),o&&a.jsxs(ft,{variant:"secondary",className:"bg-primary/10 text-primary flex items-center gap-1",children:[a.jsx(Ta,{className:"h-3 w-3"}),o]}),a.jsx(ft,{variant:"outline",children:t.category})]})]})}),a.jsxs(ue,{children:[a.jsx(Ee,{children:a.jsx(Ne,{children:"Job Description"})}),a.jsx(me,{children:a.jsx("p",{className:"text-muted-foreground whitespace-pre-line leading-relaxed",children:t.description})})]}),t.requirements&&a.jsxs(ue,{children:[a.jsx(Ee,{children:a.jsx(Ne,{children:"Requirements"})}),a.jsx(me,{children:a.jsx("p",{className:"text-muted-foreground whitespace-pre-line leading-relaxed",children:t.requirements})})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(ue,{children:[a.jsx(Ee,{children:a.jsx(Ne,{children:"Contact Company"})}),a.jsxs(me,{className:"space-y-4",children:[t.company_phone?a.jsxs("div",{className:"space-y-2",children:[a.jsx(A,{className:"w-full",size:"lg",asChild:!0,children:a.jsxs("a",{href:`tel:${t.company_phone}`,children:[a.jsx(Ll,{className:"h-4 w-4 mr-2"}),"WhatsApp"]})}),a.jsx("p",{className:"text-sm text-muted-foreground text-center",children:t.company_phone})]}):a.jsx("p",{className:"text-sm text-muted-foreground text-center py-2",children:"No phone number available"}),t.company_email?a.jsxs("div",{className:"space-y-2",children:[a.jsx(A,{className:"w-full",size:"lg",variant:"secondary",asChild:!0,children:a.jsxs("a",{href:`mailto:${t.company_email}`,children:[a.jsx(Oa,{className:"h-4 w-4 mr-2"}),"Email Company"]})}),a.jsx("p",{className:"text-sm text-muted-foreground text-center",children:t.company_email})]}):a.jsx("p",{className:"text-sm text-muted-foreground text-center py-2",children:"No email available"}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Zn,{className:"h-4 w-4"}),a.jsxs("span",{children:["Posted: ",i(t.created_at)]})]}),t.application_deadline&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Zn,{className:"h-4 w-4"}),a.jsxs("span",{children:["Deadline: ",i(t.application_deadline)]})]})]})]})]}),a.jsxs(ue,{children:[a.jsx(Ee,{children:a.jsx(Ne,{children:"Job Overview"})}),a.jsxs(me,{className:"space-y-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Company"}),a.jsx("p",{className:"text-muted-foreground",children:t.company})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Location"}),a.jsx("p",{className:"text-muted-foreground",children:t.location})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Job Type"}),a.jsx("p",{className:"text-muted-foreground",children:t.job_type})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Category"}),a.jsx("p",{className:"text-muted-foreground",children:t.category})]}),o&&a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Salary Range"}),a.jsx("p",{className:"text-muted-foreground",children:o})]})]})]})]})]})]}),a.jsx(Te,{})]})},Jf=()=>{const[s,e]=v.useState({email:"",password:""}),[t,r]=v.useState({}),[n,i]=v.useState(!1),{toast:o}=gt(),l=Ae(),{loading:c}=ws(),d=async u=>{u.preventDefault(),r({}),i(!0);try{const f=Af.parse(s),{error:g}=await $f(f);g?o({variant:"destructive",title:"Login Failed",description:g.message}):(o({title:"Welcome back!",description:"You've successfully logged in."}),l("/"))}catch(f){if(f.errors){const g={};f.errors.forEach(h=>{g[h.path[0]]=h.message}),r(g)}}finally{i(!1)}};return c?null:a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(Ce,{}),a.jsx("section",{className:"flex-1 bg-muted/30 py-16",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"max-w-md mx-auto",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-hero mb-4",children:a.jsx(Bt,{className:"h-8 w-8 text-primary-foreground"})}),a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Welcome Back"}),a.jsx("p",{className:"text-muted-foreground",children:"Log in to your KaziConnect account"})]}),a.jsxs(ue,{className:"shadow-card",children:[a.jsxs(Ee,{children:[a.jsx(Ne,{children:"Login"}),a.jsx(Sr,{children:"Enter your credentials to access your account"})]}),a.jsxs(me,{children:[a.jsxs("form",{onSubmit:d,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"email",children:"Email"}),a.jsx(W,{id:"email",type:"email",placeholder:"your.email@example.com",value:s.email,onChange:u=>e({...s,email:u.target.value}),required:!0}),t.email&&a.jsx("p",{className:"text-sm text-destructive",children:t.email})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(B,{htmlFor:"password",children:"Password"}),a.jsx(M,{to:"/forgot-password",className:"text-sm text-primary hover:underline",children:"Forgot password?"})]}),a.jsx(W,{id:"password",type:"password",placeholder:"Enter your password",value:s.password,onChange:u=>e({...s,password:u.target.value}),required:!0}),t.password&&a.jsx("p",{className:"text-sm text-destructive",children:t.password})]}),a.jsx(A,{type:"submit",className:"w-full bg-gradient-hero hover:opacity-90 transition-smooth",disabled:n,children:n?"Logging in...":"Log In"})]}),a.jsxs("div",{className:"mt-6 text-center text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Don't have an account? "}),a.jsx(M,{to:"/register",className:"text-primary font-medium hover:underline",children:"Sign up"})]})]})]})]})})}),a.jsx(Te,{})]})},Gf=ul,Fo=v.forwardRef(({className:s,...e},t)=>a.jsx(wa,{ref:t,className:q("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...e}));Fo.displayName=wa.displayName;const _n=v.forwardRef(({className:s,...e},t)=>a.jsx(xa,{ref:t,className:q("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",s),...e}));_n.displayName=xa.displayName;const jn=v.forwardRef(({className:s,...e},t)=>a.jsx(_a,{ref:t,className:q("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...e}));jn.displayName=_a.displayName;const Qf=()=>{const[s,e]=v.useState({fullName:"",email:"",password:"",confirmPassword:"",role:"job_seeker"}),[t,r]=v.useState({companyName:"",fullName:"",email:"",password:"",confirmPassword:"",role:"employer"}),[n,i]=v.useState({}),[o,l]=v.useState(!1),{toast:c}=gt(),d=Ae(),{loading:u}=ws(),f=async b=>{b.preventDefault(),await h(s)},g=async b=>{b.preventDefault(),await h({...t,fullName:t.fullName||t.companyName})},h=async b=>{i({}),l(!0);try{const m=Rf.parse(b),{error:p}=await If(m);p?c({variant:"destructive",title:"Registration Failed",description:p.message}):(c({title:"Account Created!",description:"You've successfully registered. Welcome to KaziConnect!"}),d("/"))}catch(m){if(m.errors){const p={};m.errors.forEach(x=>{p[x.path[0]]=x.message}),i(p)}}finally{l(!1)}};return u?null:a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(Ce,{}),a.jsx("section",{className:"flex-1 bg-muted/30 py-16",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-hero mb-4",children:a.jsx(Bt,{className:"h-8 w-8 text-primary-foreground"})}),a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Join KaziConnect"}),a.jsx("p",{className:"text-muted-foreground",children:"Create your account and start your journey"})]}),a.jsxs(ue,{className:"shadow-card",children:[a.jsxs(Ee,{children:[a.jsx(Ne,{children:"Sign Up"}),a.jsx(Sr,{children:"Choose your account type to get started"})]}),a.jsxs(me,{children:[a.jsxs(Gf,{defaultValue:"seeker",className:"w-full",children:[a.jsxs(Fo,{className:"grid w-full grid-cols-2 mb-6",children:[a.jsx(_n,{value:"seeker",children:"Job Seeker"}),a.jsx(_n,{value:"employer",children:"Employer"})]}),a.jsx(jn,{value:"seeker",children:a.jsxs("form",{onSubmit:f,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"seeker-name",children:"Full Name"}),a.jsx(W,{id:"seeker-name",type:"text",placeholder:"John Doe",value:s.fullName,onChange:b=>e({...s,fullName:b.target.value}),required:!0}),n.fullName&&a.jsx("p",{className:"text-sm text-destructive",children:n.fullName})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"seeker-email",children:"Email"}),a.jsx(W,{id:"seeker-email",type:"email",placeholder:"your.email@example.com",value:s.email,onChange:b=>e({...s,email:b.target.value}),required:!0}),n.email&&a.jsx("p",{className:"text-sm text-destructive",children:n.email})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"seeker-password",children:"Password"}),a.jsx(W,{id:"seeker-password",type:"password",placeholder:"Create a strong password",value:s.password,onChange:b=>e({...s,password:b.target.value}),required:!0}),n.password&&a.jsx("p",{className:"text-sm text-destructive",children:n.password})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"seeker-confirm",children:"Confirm Password"}),a.jsx(W,{id:"seeker-confirm",type:"password",placeholder:"Re-enter your password",value:s.confirmPassword,onChange:b=>e({...s,confirmPassword:b.target.value}),required:!0}),n.confirmPassword&&a.jsx("p",{className:"text-sm text-destructive",children:n.confirmPassword})]}),a.jsx(A,{type:"submit",className:"w-full bg-gradient-hero hover:opacity-90 transition-smooth",disabled:o,children:o?"Creating Account...":"Create Job Seeker Account"})]})}),a.jsx(jn,{value:"employer",children:a.jsxs("form",{onSubmit:g,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"company-name",children:"Company Name"}),a.jsx(W,{id:"company-name",type:"text",placeholder:"Your Company Ltd.",value:t.companyName,onChange:b=>r({...t,companyName:b.target.value}),required:!0}),n.companyName&&a.jsx("p",{className:"text-sm text-destructive",children:n.companyName})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"employer-full-name",children:"Contact Person Name"}),a.jsx(W,{id:"employer-full-name",type:"text",placeholder:"John Doe",value:t.fullName,onChange:b=>r({...t,fullName:b.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"employer-email",children:"Work Email"}),a.jsx(W,{id:"employer-email",type:"email",placeholder:"hiring@company.com",value:t.email,onChange:b=>r({...t,email:b.target.value}),required:!0}),n.email&&a.jsx("p",{className:"text-sm text-destructive",children:n.email})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"employer-password",children:"Password"}),a.jsx(W,{id:"employer-password",type:"password",placeholder:"Create a strong password",value:t.password,onChange:b=>r({...t,password:b.target.value}),required:!0}),n.password&&a.jsx("p",{className:"text-sm text-destructive",children:n.password})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"employer-confirm",children:"Confirm Password"}),a.jsx(W,{id:"employer-confirm",type:"password",placeholder:"Re-enter your password",value:t.confirmPassword,onChange:b=>r({...t,confirmPassword:b.target.value}),required:!0}),n.confirmPassword&&a.jsx("p",{className:"text-sm text-destructive",children:n.confirmPassword})]}),a.jsx(A,{type:"submit",className:"w-full bg-gradient-hero hover:opacity-90 transition-smooth",disabled:o,children:o?"Creating Account...":"Create Employer Account"})]})})]}),a.jsxs("div",{className:"mt-6 text-center text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Already have an account? "}),a.jsx(M,{to:"/login",className:"text-primary font-medium hover:underline",children:"Log in"})]})]})]})]})})}),a.jsx(Te,{})]})},Yf=()=>{const s=[{icon:Pa,title:"Our Mission",description:"To bridge the gap between talented Kenyan professionals and organizations seeking exceptional talent."},{icon:Il,title:"Our Values",description:"Integrity, transparency, and dedication to empowering Kenya's workforce."},{icon:Sn,title:"Our Vision",description:"To become Kenya's most trusted and comprehensive job portal, driving economic growth through employment."}],e=[{icon:kn,title:"50,000+ Job Seekers",description:"A diverse pool of talented professionals across all industries"},{icon:Nl,title:"2,500+ Companies",description:"From startups to multinational corporations trust KaziConnect"},{icon:Fl,title:"Verified Listings",description:"All job postings are verified to ensure authenticity and quality"}];return a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(Ce,{}),a.jsx("section",{className:"bg-gradient-hero text-primary-foreground py-20",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[a.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"About KaziConnect Kenya"}),a.jsx("p",{className:"text-xl text-primary-foreground/90",children:"Empowering Kenya's workforce by connecting talent with opportunity since 2025"})]})})}),a.jsx("section",{className:"py-16 bg-background",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("h2",{className:"text-3xl font-bold mb-6 text-center",children:"Our Story"}),a.jsxs("div",{className:"prose prose-lg max-w-none text-muted-foreground space-y-4",children:[a.jsx("p",{children:"KaziConnect Kenya was born from a simple observation: Kenya is home to incredibly talented professionals, yet many struggle to find opportunities that match their skills and ambitions. At the same time, employers face challenges in reaching qualified candidates efficiently."}),a.jsx("p",{children:"We set out to solve this problem by creating a modern, accessible platform that makes job searching and recruitment seamless for everyone. Our platform combines cutting-edge technology with deep understanding of the Kenyan job market to deliver results that matter."}),a.jsx("p",{children:"Today, KaziConnect Kenya serves thousands of job seekers and hundreds of companies across Kenya, from Nairobi to Mombasa, Kisumu to Nakuru, and everywhere in between. We're proud to play a role in building Kenya's economic future, one connection at a time."})]})]})})}),a.jsx("section",{className:"py-16 bg-muted/30",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsx("h2",{className:"text-3xl font-bold mb-12 text-center",children:"What Drives Us"}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:s.map((t,r)=>a.jsx(ue,{className:"shadow-card",children:a.jsxs(me,{className:"pt-6",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-lg bg-primary/10 mb-4",children:a.jsx(t.icon,{className:"h-6 w-6 text-primary"})}),a.jsx("h3",{className:"text-xl font-semibold mb-3",children:t.title}),a.jsx("p",{className:"text-muted-foreground",children:t.description})]})},r))})]})})}),a.jsx("section",{className:"py-16 bg-background",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsx("h2",{className:"text-3xl font-bold mb-12 text-center",children:"Why Choose KaziConnect"}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:e.map((t,r)=>a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-hero mb-4",children:a.jsx(t.icon,{className:"h-8 w-8 text-primary-foreground"})}),a.jsx("h3",{className:"text-xl font-semibold mb-3",children:t.title}),a.jsx("p",{className:"text-muted-foreground",children:t.description})]},r))})]})})}),a.jsx("section",{className:"py-16 bg-gradient-hero text-primary-foreground",children:a.jsx("div",{className:"container mx-auto px-4 text-center",children:a.jsxs("div",{className:"max-w-3xl mx-auto",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Ready to Get Started?"}),a.jsx("p",{className:"text-xl mb-8 text-primary-foreground/90",children:"Join thousands of professionals and companies already using KaziConnect"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsx(M,{to:"/register",children:a.jsx(A,{size:"lg",variant:"secondary",className:"min-w-[200px]",children:"Sign Up Now"})}),a.jsx(M,{to:"/jobs",children:a.jsx(A,{size:"lg",variant:"outline",className:"min-w-[200px] border-primary-foreground text-primary-foreground hover:bg-primary-foreground hover:text-primary",children:"Browse Jobs"})})]})]})})}),a.jsx(Te,{})]})},Xf=()=>{const s=[{icon:kn,title:"Access to Top Talent",description:"Reach over 50,000 qualified job seekers across Kenya"},{icon:Pa,title:"Targeted Recruitment",description:"Filter and find candidates that match your exact requirements"},{icon:ql,title:"Fast & Easy",description:"Post a job in minutes with our streamlined process"},{icon:Ta,title:"Affordable Pricing",description:"Only $10 per job posting - no hidden fees"},{icon:Sn,title:"Increase Visibility",description:"Get your job openings in front of the right candidates"},{icon:je,title:"Verified Platform",description:"M-Pesa payment integration for secure transactions"}],e=[{step:"1",title:"Create Your Account",description:"Sign up with your company details in less than 2 minutes"},{step:"2",title:"Post Your Job",description:"Fill in job details, requirements, and company information"},{step:"3",title:"Pay via M-Pesa",description:"Secure payment of $10 using Stripe"},{step:"4",title:"Receive Applications",description:"Review qualified candidates and manage applications in your dashboard"}];return a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(Ce,{}),a.jsx("section",{className:"bg-gradient-hero text-primary-foreground py-20",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[a.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Find Your Next Great Hire"}),a.jsx("p",{className:"text-xl text-primary-foreground/90 mb-8",children:"Connect with qualified candidates across Kenya. Post jobs for just $10."}),a.jsx(M,{to:"/register",children:a.jsx(A,{size:"lg",variant:"secondary",className:"text-lg px-8",children:"Start Hiring Today"})})]})})}),a.jsx("section",{className:"py-16 bg-background",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Why Employers Choose KaziConnect"}),a.jsx("p",{className:"text-xl text-muted-foreground",children:"Everything you need to find and hire the best talent in Kenya"})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map((t,r)=>a.jsx(ue,{className:"shadow-card hover:shadow-hover transition-smooth",children:a.jsxs(me,{className:"pt-6",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-lg bg-primary/10 mb-4",children:a.jsx(t.icon,{className:"h-6 w-6 text-primary"})}),a.jsx("h3",{className:"text-xl font-semibold mb-3",children:t.title}),a.jsx("p",{className:"text-muted-foreground",children:t.description})]})},r))})]})})}),a.jsx("section",{className:"py-16 bg-muted/30",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"How It Works"}),a.jsx("p",{className:"text-xl text-muted-foreground",children:"Start recruiting in 4 simple steps"})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((t,r)=>a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-hero text-primary-foreground text-2xl font-bold mb-4",children:t.step}),a.jsx("h3",{className:"text-xl font-semibold mb-3",children:t.title}),a.jsx("p",{className:"text-muted-foreground",children:t.description})]},r))})]})})}),a.jsx("section",{className:"py-16 bg-background",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Simple, Transparent Pricing"}),a.jsx("p",{className:"text-xl text-muted-foreground",children:"No subscriptions, no hidden fees"})]}),a.jsx(ue,{className:"shadow-hover max-w-md mx-auto",children:a.jsx(me,{className:"pt-6",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"text-5xl font-bold text-primary mb-2",children:"$10"}),a.jsx("div",{className:"text-muted-foreground",children:"per job posting"})]}),a.jsxs("ul",{className:"space-y-3 mb-8 text-left",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx(je,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),a.jsx("span",{children:"30-day listing duration"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx(je,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),a.jsx("span",{children:"Unlimited applications"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx(je,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),a.jsx("span",{children:"Application management dashboard"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx(je,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),a.jsx("span",{children:"Candidate profile access"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx(je,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),a.jsx("span",{children:"Secure M-Pesa payment"})]})]}),a.jsx(M,{to:"/register",children:a.jsx(A,{size:"lg",className:"w-full bg-gradient-hero hover:opacity-90 transition-smooth",children:"Post Your First Job"})})]})})})]})})}),a.jsx("section",{className:"py-16 bg-gradient-hero text-primary-foreground",children:a.jsx("div",{className:"container mx-auto px-4 text-center",children:a.jsxs("div",{className:"max-w-3xl mx-auto",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Ready to Find Your Perfect Candidate?"}),a.jsx("p",{className:"text-xl mb-8 text-primary-foreground/90",children:"Join hundreds of companies already hiring through KaziConnect Kenya"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsx(M,{to:"/register",children:a.jsx(A,{size:"lg",variant:"secondary",className:"min-w-[200px]",children:"Get Started"})}),a.jsx(M,{to:"/about",children:a.jsx(A,{size:"lg",variant:"outline",className:"min-w-[200px] border-primary-foreground text-primary-foreground hover:bg-primary-foreground hover:text-primary",children:"Learn More"})})]})]})})}),a.jsx(Te,{})]})},vr=v.forwardRef(({className:s,...e},t)=>a.jsx("textarea",{className:q("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...e}));vr.displayName="Textarea";const Zf=()=>{const{user:s,loading:e}=ws(),t=Ae(),{toast:r}=gt(),[n,i]=v.useState(!1),[o,l]=v.useState({full_name:"",email:"",phone:"",location:"",bio:"",company_name:""});v.useEffect(()=>{!e&&!s&&t("/login")},[s,e,t]),v.useEffect(()=>{s&&c()},[s]);const c=async()=>{if(!s)return;const{data:u,error:f}=await le.from("profiles").select("*").eq("id",s.id).single();f?r({variant:"destructive",title:"Error",description:"Failed to load profile"}):u&&l({full_name:u.full_name||"",email:u.email||"",phone:u.phone||"",location:u.location||"",bio:u.bio||"",company_name:u.company_name||""})},d=async u=>{if(u.preventDefault(),!s)return;i(!0);const{error:f}=await le.from("profiles").update({full_name:o.full_name,phone:o.phone,location:o.location,bio:o.bio,company_name:o.company_name}).eq("id",s.id);i(!1),r(f?{variant:"destructive",title:"Error",description:f.message}:{title:"Success",description:"Profile updated successfully"})};return e?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Dt,{className:"h-8 w-8 animate-spin"})}):a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(Ce,{}),a.jsx("main",{className:"flex-1 container mx-auto px-4 py-8",children:a.jsxs(ue,{className:"max-w-2xl mx-auto",children:[a.jsx(Ee,{children:a.jsx(Ne,{children:"My Profile"})}),a.jsx(me,{children:a.jsxs("form",{onSubmit:d,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"full_name",children:"Full Name"}),a.jsx(W,{id:"full_name",value:o.full_name,onChange:u=>l({...o,full_name:u.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"email",children:"Email"}),a.jsx(W,{id:"email",type:"email",value:o.email,disabled:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"phone",children:"Phone"}),a.jsx(W,{id:"phone",value:o.phone,onChange:u=>l({...o,phone:u.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"location",children:"Location"}),a.jsx(W,{id:"location",value:o.location,onChange:u=>l({...o,location:u.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"company_name",children:"Company Name (Employers only)"}),a.jsx(W,{id:"company_name",value:o.company_name,onChange:u=>l({...o,company_name:u.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"bio",children:"Bio"}),a.jsx(vr,{id:"bio",value:o.bio,onChange:u=>l({...o,bio:u.target.value}),rows:4})]}),a.jsxs(A,{type:"submit",disabled:n,className:"w-full",children:[n&&a.jsx(Dt,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Profile"]})]})})]})}),a.jsx(Te,{})]})},em=()=>{const{user:s,loading:e}=ws(),t=Ae(),{toast:r}=gt(),[n,i]=v.useState(!1),[o,l]=v.useState(!1),[c,d]=v.useState({title:"",company:"",company_email:"",company_phone:"",location:"",job_type:"",category:"",salary_min:"",salary_max:"",description:"",requirements:""}),[u,f]=v.useState(null),[g,h]=v.useState(null);v.useEffect(()=>{!e&&!s&&t("/login")},[s,e,t]);const b=p=>{var _;const x=(_=p.target.files)==null?void 0:_[0];if(x){if(!x.type.startsWith("image/")){r({variant:"destructive",title:"Invalid file",description:"Please upload an image file"});return}if(x.size>5242880){r({variant:"destructive",title:"File too large",description:"Image must be less than 5MB"});return}f(x);const w=new FileReader;w.onloadend=()=>{h(w.result)},w.readAsDataURL(x)}},m=async p=>{var w;p.preventDefault();const{data:{session:x},error:_}=await le.auth.getSession();if(console.log("Session check:",{hasSession:!!x,hasUser:!!(x!=null&&x.user),userId:(w=x==null?void 0:x.user)==null?void 0:w.id,sessionError:_}),!(x!=null&&x.user)){console.error("No authenticated session found"),r({variant:"destructive",title:"Authentication Required",description:"Please log in to post a job"}),t("/login");return}i(!0);try{let S=null;if(u){const J=u.name.split(".").pop(),ce=`${x.user.id}/${Date.now()}.${J}`;console.log("Uploading image:",ce);const{error:se}=await le.storage.from("job-images").upload(ce,u);if(se)throw console.error("Image upload error:",se),se;const{data:{publicUrl:Ie}}=le.storage.from("job-images").getPublicUrl(ce);S=Ie,console.log("Image uploaded successfully:",S)}const T={...c,salary_min:c.salary_min?parseInt(c.salary_min):null,salary_max:c.salary_max?parseInt(c.salary_max):null,employer_id:x.user.id,is_active:!1,payment_status:"pending",image_url:S};console.log("Inserting job with data:",{...T,employer_id:x.user.id,hasAuthContext:!!x});const{data:E,error:$}=await le.from("jobs").insert([T]).select().single();if($)throw console.error("Job insert error:",$),new Error(`Failed to create job: ${$.message}`);console.log("Job created successfully:",E),l(!0),console.log("Creating payment session for job:",E.id);const{data:L,error:I}=await le.functions.invoke("create-payment",{body:{jobId:E.id}});if(I)throw console.error("Payment creation error:",I),I;console.log("Payment session created:",L),L!=null&&L.url&&(window.open(L.url,"_blank"),r({title:"Redirecting to payment",description:"Complete your payment to activate the job listing"}))}catch(S){console.error("Submit error:",S),r({variant:"destructive",title:"Error",description:S.message||"Failed to create job posting"})}finally{i(!1),l(!1)}};return e?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Dt,{className:"h-8 w-8 animate-spin"})}):a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(Ce,{}),a.jsx("main",{className:"flex-1 container mx-auto px-4 py-8",children:a.jsxs(ue,{className:"max-w-3xl mx-auto",children:[a.jsxs(Ee,{children:[a.jsx(Ne,{children:"Post a New Job"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Only $10 per 30-day listing"})]}),a.jsx(me,{children:a.jsxs("form",{onSubmit:m,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"title",children:"Job Title *"}),a.jsx(W,{id:"title",value:c.title,onChange:p=>d({...c,title:p.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"company",children:"Company Name *"}),a.jsx(W,{id:"company",value:c.company,onChange:p=>d({...c,company:p.target.value}),required:!0})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"company_email",children:"Company Email *"}),a.jsx(W,{id:"company_email",type:"email",value:c.company_email,onChange:p=>d({...c,company_email:p.target.value}),placeholder:"company@example.com",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"company_phone",children:"Company Phone *"}),a.jsx(W,{id:"company_phone",type:"tel",value:c.company_phone,onChange:p=>d({...c,company_phone:p.target.value}),placeholder:"0712345678",required:!0})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"location",children:"Location *"}),a.jsx(W,{id:"location",value:c.location,onChange:p=>d({...c,location:p.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"job_type",children:"Job Type *"}),a.jsxs(dr,{value:c.job_type,onValueChange:p=>d({...c,job_type:p}),required:!0,children:[a.jsx(Os,{children:a.jsx(ur,{placeholder:"Select type"})}),a.jsxs(Ps,{children:[a.jsx(ae,{value:"Full-time",children:"Full-time"}),a.jsx(ae,{value:"Part-time",children:"Part-time"}),a.jsx(ae,{value:"Contract",children:"Contract"}),a.jsx(ae,{value:"Internship",children:"Internship"})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"category",children:"Category *"}),a.jsx(W,{id:"category",value:c.category,onChange:p=>d({...c,category:p.target.value}),placeholder:"e.g., Technology, Healthcare, Finance",required:!0})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"salary_min",children:"Minimum Salary (KES)"}),a.jsx(W,{id:"salary_min",type:"number",value:c.salary_min,onChange:p=>d({...c,salary_min:p.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"salary_max",children:"Maximum Salary (KES)"}),a.jsx(W,{id:"salary_max",type:"number",value:c.salary_max,onChange:p=>d({...c,salary_max:p.target.value})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"description",children:"Job Description *"}),a.jsx(vr,{id:"description",value:c.description,onChange:p=>d({...c,description:p.target.value}),rows:6,required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"requirements",children:"Requirements"}),a.jsx(vr,{id:"requirements",value:c.requirements,onChange:p=>d({...c,requirements:p.target.value}),rows:4})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"image",children:"Job Image/Poster (Optional)"}),a.jsx(W,{id:"image",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:b}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Upload a job poster or company image (Max 5MB, JPEG/PNG/WEBP)"}),g&&a.jsx("div",{className:"mt-2",children:a.jsx("img",{src:g,alt:"Preview",className:"max-w-full h-48 object-cover rounded-md border"})})]}),a.jsxs(A,{type:"submit",disabled:n||o,className:"w-full",children:[(n||o)&&a.jsx(Dt,{className:"mr-2 h-4 w-4 animate-spin"}),n?"Saving Job...":o?"Redirecting to Payment...":a.jsxs(a.Fragment,{children:[a.jsx(Al,{className:"mr-2 h-4 w-4"}),"Post Job & Pay $10"]})]})]})})]})}),a.jsx(Te,{})]})},tm=()=>{const[s]=An(),e=Ae(),{toast:t}=gt(),[r,n]=v.useState(!0),i=s.get("session_id"),o=s.get("job_id");v.useEffect(()=>{i&&o&&l()},[i,o]);const l=async()=>{try{console.log(`Activating job ${o} with session ${i}`);const{data:c,error:d}=await le.from("jobs").update({is_active:!0,payment_status:"completed",payment_reference:i}).eq("id",o).select().single();if(d)throw console.error("Error activating job:",d),d;console.log("Job activated successfully:",c),t({title:"Payment Successful!",description:"Your job posting is now live and visible to candidates"})}catch(c){console.error("Activation error:",c),t({variant:"destructive",title:"Activation Error",description:c.message||"Failed to activate job posting. Please contact support."})}finally{n(!1)}};return a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(Ce,{}),a.jsx("main",{className:"flex-1 container mx-auto px-4 py-16",children:a.jsxs(ue,{className:"max-w-md mx-auto text-center",children:[a.jsxs(Ee,{children:[a.jsx("div",{className:"mx-auto mb-4",children:r?a.jsx(Dt,{className:"h-16 w-16 animate-spin text-primary"}):a.jsx(je,{className:"h-16 w-16 text-green-500"})}),a.jsx(Ne,{children:r?"Processing Payment...":"Payment Successful!"})]}),a.jsxs(me,{className:"space-y-4",children:[a.jsx("p",{className:"text-muted-foreground",children:r?"Please wait while we activate your job posting...":"Your job posting is now live and visible to job seekers. Candidates can now view and apply to your position."}),!r&&i&&a.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-2 text-sm",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Payment Reference:"})," ",i]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Status:"})," ",a.jsx("span",{className:"text-green-600",children:"Completed"})]})]}),!r&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(A,{onClick:()=>e("/jobs"),className:"w-full",children:"View Job Listings"}),a.jsx(A,{onClick:()=>e("/profile"),variant:"outline",className:"w-full",children:"Go to My Profile"})]})]})]})}),a.jsx(Te,{})]})},sm=()=>{const[s]=An(),e=Ae();return s.get("job_id"),a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(Ce,{}),a.jsx("main",{className:"flex-1 container mx-auto px-4 py-16",children:a.jsxs(ue,{className:"max-w-md mx-auto text-center",children:[a.jsxs(Ee,{children:[a.jsx(Pl,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),a.jsx(Ne,{children:"Payment Canceled"})]}),a.jsxs(me,{className:"space-y-4",children:[a.jsx("p",{className:"text-muted-foreground",children:"Your payment was canceled. Your job posting has been saved as a draft and can be activated once payment is completed."}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(A,{onClick:()=>e("/post-job"),className:"w-full",children:"Try Again"}),a.jsx(A,{onClick:()=>e("/"),variant:"outline",className:"w-full",children:"Go to Homepage"})]})]})]})}),a.jsx(Te,{})]})},rm=()=>{const s=gs();return v.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",s.pathname)},[s.pathname]),a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),a.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},nm=new zc,im=()=>a.jsx(Gc,{client:nm,children:a.jsxs(kc,{children:[a.jsx(Wl,{}),a.jsx(Sc,{}),a.jsx(nu,{children:a.jsxs(Qd,{children:[a.jsx(xe,{path:"/",element:a.jsx(Bf,{})}),a.jsx(xe,{path:"/jobs",element:a.jsx(Wf,{})}),a.jsx(xe,{path:"/jobs/:id",element:a.jsx(Hf,{})}),a.jsx(xe,{path:"/login",element:a.jsx(Jf,{})}),a.jsx(xe,{path:"/register",element:a.jsx(Qf,{})}),a.jsx(xe,{path:"/about",element:a.jsx(Yf,{})}),a.jsx(xe,{path:"/employers",element:a.jsx(Xf,{})}),a.jsx(xe,{path:"/profile",element:a.jsx(Zf,{})}),a.jsx(xe,{path:"/post-job",element:a.jsx(em,{})}),a.jsx(xe,{path:"/payment-success",element:a.jsx(tm,{})}),a.jsx(xe,{path:"/payment-canceled",element:a.jsx(sm,{})}),a.jsx(xe,{path:"*",element:a.jsx(rm,{})})]})})]})});ka(document.getElementById("root")).render(a.jsx(im,{}));
